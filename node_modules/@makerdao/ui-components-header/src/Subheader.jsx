import React from "react";
import styled from "styled-components";
import { element, arrayOf } from "prop-types";
import { themeGet, display } from "styled-system";

import {
  Flex,
  Text,
  Dropdown,
  DefaultDropdown,
} from "@makerdao/ui-components-core";

import downCaret from "./assets/downCaret.inline.svg";

const Links = styled.ul`
  ${display};
`;

const StyledSubheader = styled.div`
  border-top: 1px solid #e3e3e6;
  background-color: white;
`;

const LinkContainer = styled.li`
  display: inline-block;
  margin-left: ${themeGet("space.xl")};
  text-align: right;
`;

const Link = styled(Text)`
  cursor: pointer;

  a {
    text-decoration: none;
    color: ${themeGet("colors.heading")};
  }
`;

const MobileMenuTrigger = styled.div`
  &:after {
    content: url(${downCaret});
    padding-left: ${themeGet("space.xs")};
  }
`;

const Subheader = props => {
  return (
    <StyledSubheader>
      <Flex
        maxWidth="1140px"
        m="0 auto"
        p="m"
        justifyContent="space-between"
        alignItems="center"
      >
        <div>
          <Text fontWeight="medium" color="heading">
            Governance
          </Text>
        </div>
        <nav>
          <Links display={["none", "none", "block"]}>
            {props.links.map((link, index) => (
              <LinkContainer key={link + index}>
                <Link>{link}</Link>
              </LinkContainer>
            ))}
          </Links>
          <Dropdown
            display={["block", "block", "none"]}
            placement="bottom-end"
            trigger={<MobileMenuTrigger>More</MobileMenuTrigger>}
          >
            <DefaultDropdown>
              {props.links.map((link, index) => (
                <Link key={link + index}>{link}</Link>
              ))}
            </DefaultDropdown>
          </Dropdown>
        </nav>
      </Flex>
    </StyledSubheader>
  );
};

Subheader.propTypes = {
  links: arrayOf(element),
};

Subheader.defaultProps = {
  links: [],
};

export default Subheader;
