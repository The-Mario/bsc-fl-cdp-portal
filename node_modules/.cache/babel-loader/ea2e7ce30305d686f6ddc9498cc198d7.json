{"ast":null,"code":"'use strict';\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _regenerator = require('babel-runtime/regenerator');\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _keys = require('babel-runtime/core-js/object/keys');\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nvar _promise = require('babel-runtime/core-js/promise');\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nexports.default = function (maker) {\n  var _this = this;\n\n  maker.service('accounts', true).addAccountType('ledger', function () {\n    var _ref = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee(settings) {\n      var subprovider, address, addresses;\n      return _regenerator2.default.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              subprovider = (0, _ledgerSubprovider2.default)(function () {\n                return _hwTransportU2f2.default.create();\n              }, {\n                // options: networkId, path, accountsLength, accountsOffset\n                accountsOffset: settings.accountsOffset || 0,\n                accountsLength: settings.accountsLength || 1,\n                networkId: maker.service('web3').networkId(),\n                path: settings.path || (settings.legacy ? legacyDerivationPath : defaultDerivationPath)\n              });\n              address = void 0;\n\n              if (!(settings.accountsLength && settings.accountsLength > 1)) {\n                _context.next = 14;\n                break;\n              }\n\n              if (settings.choose) {\n                _context.next = 5;\n                break;\n              }\n\n              throw new Error('If accountsLength > 1, \"choose\" must be defined in account options.');\n\n            case 5:\n              _context.next = 7;\n              return new _promise2.default(function (resolve, reject) {\n                return subprovider.getAccounts(function (err, addresses) {\n                  return err ? reject(err) : resolve(addresses);\n                });\n              });\n\n            case 7:\n              addresses = _context.sent;\n              _context.next = 10;\n              return new _promise2.default(function (resolve, reject) {\n                var callback = function callback(err, address) {\n                  return err ? reject(err) : resolve(address);\n                }; // this chooser function allows the app using the plugin to display the\n                // list of addresses to a human user and let them make a choice.\n\n\n                settings.choose((0, _keys2.default)(addresses).map(function (k) {\n                  return addresses[k];\n                }), callback);\n              });\n\n            case 10:\n              address = _context.sent;\n              (0, _ledgerSubprovider.setChosenAddress)(address);\n              _context.next = 17;\n              break;\n\n            case 14:\n              _context.next = 16;\n              return new _promise2.default(function (resolve, reject) {\n                return subprovider.getAccounts(function (err, addresses) {\n                  return err ? reject(err) : resolve(addresses[0]);\n                });\n              });\n\n            case 16:\n              address = _context.sent;\n\n            case 17:\n              return _context.abrupt('return', {\n                subprovider: subprovider,\n                address: address\n              });\n\n            case 18:\n            case 'end':\n              return _context.stop();\n          }\n        }\n      }, _callee, _this);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }());\n};\n\nvar _ledgerSubprovider = require('./vendor/ledger-subprovider');\n\nvar _ledgerSubprovider2 = _interopRequireDefault(_ledgerSubprovider);\n\nvar _hwTransportU2f = require('@ledgerhq/hw-transport-u2f');\n\nvar _hwTransportU2f2 = _interopRequireDefault(_hwTransportU2f);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar legacyDerivationPath = \"44'/60'/0'/0/0\";\nvar defaultDerivationPath = \"44'/60'/0'\";\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(_regenerator2, \"_regenerator2\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/dai-plugin-ledger-web/index.js\");\n  reactHotLoader.register(_keys2, \"_keys2\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/dai-plugin-ledger-web/index.js\");\n  reactHotLoader.register(_promise2, \"_promise2\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/dai-plugin-ledger-web/index.js\");\n  reactHotLoader.register(_asyncToGenerator3, \"_asyncToGenerator3\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/dai-plugin-ledger-web/index.js\");\n  reactHotLoader.register(_ledgerSubprovider2, \"_ledgerSubprovider2\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/dai-plugin-ledger-web/index.js\");\n  reactHotLoader.register(_hwTransportU2f2, \"_hwTransportU2f2\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/dai-plugin-ledger-web/index.js\");\n  reactHotLoader.register(_interopRequireDefault, \"_interopRequireDefault\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/dai-plugin-ledger-web/index.js\");\n  reactHotLoader.register(legacyDerivationPath, \"legacyDerivationPath\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/dai-plugin-ledger-web/index.js\");\n  reactHotLoader.register(defaultDerivationPath, \"defaultDerivationPath\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/dai-plugin-ledger-web/index.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":null,"metadata":{},"sourceType":"script"}