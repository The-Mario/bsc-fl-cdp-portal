{"ast":null,"code":"import _objectSpread from \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/src/components/Marketing/MarketsTable.js\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport React from 'react';\nimport styled from 'styled-components';\nimport { Loader, Table, Text } from '@makerdao/ui-components-core';\nimport BigNumber from 'bignumber.js';\nimport { TokenIcon } from './index';\nimport { formatter, prettifyNumber } from 'utils/ui';\nimport { getColor } from 'styles/theme';\nimport useLanguage from 'hooks/useLanguage';\nimport groupBy from 'lodash.groupby';\nimport { watch } from 'hooks/useObservable';\nimport { getMaxDaiAvailable } from 'utils/cdp';\nvar Number = styled(Text).withConfig({\n  displayName: \"MarketsTable__Number\",\n  componentId: \"sc-1ydxr8x-0\"\n})([\"color:\", \";\"], getColor('greyText'));\nvar tokenNames = {\n  USDTUSDC: 'USDT/USDC',\n  USDTDAI: 'USDT/DAI',\n  USDCDAI: 'USDC/DAI',\n  USDTUSDN: 'USDT/USDN'\n};\nvar MarketsTableStyle = styled(Table).withConfig({\n  displayName: \"MarketsTable__MarketsTableStyle\",\n  componentId: \"sc-1ydxr8x-1\"\n})([\"widht:100%;margin:0 auto;color:\", \";\", \"{color:\", \";font-size:\", \";text-align:center;}\", \"{font-size:15px;}.gem{color:#fff;}.profile-name{color:\", \";}@media (min-width:\", \"){.gem{color:\", \";}}td.tokenIcon{padding:10px 15px 5px 35px;}\", \"{padding-bottom:18px;color:\", \";text-align:center;}\", \",.summary:not(:nth-last-child(2)){border-bottom:1px solid #323b4f;}\", \"{padding-top:14px;padding-bottom:13px;text-align:center;border-bottom:1px solid #323b4f;}@media (max-width:\", \"){\", \",\", \"{}td.tokenIcon{padding:10px 15px 5px 15px;}}\"], getColor('greyText'), Text, getColor('greyText'), function (props) {\n  return props.theme.fontSizes.s;\n}, Number, getColor('greyText'), function (props) {\n  return props.theme.breakpoints.m;\n}, getColor('greyText'), Table.th, getColor('greyText'), Table.thead, Table.td, function (props) {\n  return props.theme.breakpoints.m;\n}, Table.td, Table.th);\n\nvar MarketsTable = function MarketsTable(_ref) {\n  var cdpTypesList = _ref.cdpTypesList,\n      props = _objectWithoutProperties(_ref, [\"cdpTypesList\"]);\n\n  var collateralTypesData = watch.collateralTypesData(cdpTypesList); //const debtCeilings = watch.collateralDebtCeilings(cdpTypesList);\n\n  var _useLanguage = useLanguage(),\n      lang = _useLanguage.lang;\n\n  var cdpTypesByGem = groupBy(collateralTypesData, function (type) {\n    return type.symbol.split('-')[0];\n  });\n  return /*#__PURE__*/React.createElement(MarketsTableStyle, Object.assign({}, props, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(Table.thead, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Table.tr, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Table.th, {\n    width: {\n      s: '0'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Table.th, {\n    width: {\n      s: '30px',\n      m: '49px'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Table.th, {\n    display: {\n      s: 'none',\n      m: 'block'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 11\n    }\n  }, lang.overview_page.token), /*#__PURE__*/React.createElement(Table.th, {\n    width: {\n      s: 'unset',\n      xl: '220px'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  }, lang.stability_fee), /*#__PURE__*/React.createElement(Table.th, {\n    width: {\n      s: 'unset',\n      xl: '220px'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }\n  }, lang.borrow_markets.min_col_ratio), /*#__PURE__*/React.createElement(Table.th, {\n    width: {\n      s: 'unset',\n      xl: '220px'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 11\n    }\n  }, lang.dai_available), /*#__PURE__*/React.createElement(Table.th, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Table.th, {\n    width: {\n      s: '0'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 11\n    }\n  }))), collateralTypesData ? Object.entries(cdpTypesByGem).map(function (_ref2, rowIndex) {\n    var _ref3 = _slicedToArray(_ref2, 2),\n        gem = _ref3[0],\n        cdpTypesData = _ref3[1];\n\n    cdpTypesData = cdpTypesData.map(function (ilkData) {\n      return _objectSpread({\n        maxDaiAvailableToGenerate: getMaxDaiAvailable(ilkData)\n      }, ilkData);\n    }); // aggregate data\n\n    var fees = cdpTypesData.map(function (data) {\n      return data.annualStabilityFee;\n    });\n    var minFee = BigNumber.min.apply(null, fees);\n    var colRatios = cdpTypesData.map(function (data) {\n      return data.liquidationRatio.toBigNumber();\n    });\n    var minRatio = BigNumber.min.apply(null, colRatios); //const maxRatio = BigNumber.max.apply(null, colRatios);\n\n    var daiAvailableList = cdpTypesData.map(function (data) {\n      return data.maxDaiAvailableToGenerate;\n    });\n    var totalDaiAvailable = BigNumber.sum.apply(null, daiAvailableList);\n    return [/*#__PURE__*/React.createElement(Table.tbody, {\n      key: gem //onClick={() => toggleRow(rowIndex)}\n      ,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Table.tr, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      className: \"margin\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Table.td, {\n      className: \"tokenIcon\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(TokenIcon, {\n      symbol: gem,\n      size: 50,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(Table.td, {\n      display: {\n        s: 'none',\n        m: 'table-cell'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 19\n      }\n    }, tokenNames[gem])), /*#__PURE__*/React.createElement(Table.td, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Number, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 19\n      }\n    }, formatter(minFee, {\n      percentage: true\n    }), \"%\")), /*#__PURE__*/React.createElement(Table.td, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Number, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 19\n      }\n    }, formatter(minRatio, {\n      percentage: true\n    }), \"%\")), /*#__PURE__*/React.createElement(Table.td, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Number, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 19\n      }\n    }, prettifyNumber(totalDaiAvailable, true)))))];\n  }) : /*#__PURE__*/React.createElement(Table.tbody, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Table.tr, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Table.td, {\n    colSpan: 8,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Loader, {\n    size: \"4rem\",\n    color: getColor('spinner'),\n    bg: \"#131824\",\n    m: \"40px auto\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 13\n    }\n  })))));\n};\n\n__signature__(MarketsTable, \"useLanguage{{ lang }}\", function () {\n  return [useLanguage];\n});\n\nvar _default = MarketsTable;\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(Number, \"Number\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/src/components/Marketing/MarketsTable.js\");\n  reactHotLoader.register(tokenNames, \"tokenNames\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/src/components/Marketing/MarketsTable.js\");\n  reactHotLoader.register(MarketsTableStyle, \"MarketsTableStyle\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/src/components/Marketing/MarketsTable.js\");\n  reactHotLoader.register(MarketsTable, \"MarketsTable\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/src/components/Marketing/MarketsTable.js\");\n  reactHotLoader.register(_default, \"default\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/src/components/Marketing/MarketsTable.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/src/components/Marketing/MarketsTable.js"],"names":["React","styled","Loader","Table","Text","BigNumber","TokenIcon","formatter","prettifyNumber","getColor","useLanguage","groupBy","watch","getMaxDaiAvailable","Number","tokenNames","USDTUSDC","USDTDAI","USDCDAI","USDTUSDN","MarketsTableStyle","props","theme","fontSizes","s","breakpoints","m","th","thead","td","MarketsTable","cdpTypesList","collateralTypesData","lang","cdpTypesByGem","type","symbol","split","overview_page","token","xl","stability_fee","borrow_markets","min_col_ratio","dai_available","Object","entries","map","rowIndex","gem","cdpTypesData","ilkData","maxDaiAvailableToGenerate","fees","data","annualStabilityFee","minFee","min","apply","colRatios","liquidationRatio","toBigNumber","minRatio","daiAvailableList","totalDaiAvailable","sum","percentage"],"mappings":";;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAASC,MAAT,EAAiBC,KAAjB,EAAwBC,IAAxB,QAAoC,8BAApC;AACA,OAAOC,SAAP,MAAsB,cAAtB;AACA,SAASC,SAAT,QAA0B,SAA1B;AACA,SAASC,SAAT,EAAoBC,cAApB,QAA0C,UAA1C;AACA,SAASC,QAAT,QAAyB,cAAzB;AACA,OAAOC,WAAP,MAAwB,mBAAxB;AACA,OAAOC,OAAP,MAAoB,gBAApB;AACA,SAASC,KAAT,QAAsB,qBAAtB;AACA,SAASC,kBAAT,QAAmC,WAAnC;AAEA,IAAMC,MAAM,GAAGb,MAAM,CAACG,IAAD,CAAT;AAAA;AAAA;AAAA,oBACDK,QAAQ,CAAC,UAAD,CADP,CAAZ;AAIA,IAAMM,UAAU,GAAG;AACjBC,EAAAA,QAAQ,EAAE,WADO;AAEjBC,EAAAA,OAAO,EAAE,UAFQ;AAGjBC,EAAAA,OAAO,EAAE,UAHQ;AAIjBC,EAAAA,QAAQ,EAAE;AAJO,CAAnB;AAOA,IAAMC,iBAAiB,GAAGnB,MAAM,CAACE,KAAD,CAAT;AAAA;AAAA;AAAA,0hBAGZM,QAAQ,CAAC,UAAD,CAHI,EAKnBL,IALmB,EAMVK,QAAQ,CAAC,UAAD,CANE,EAON,UAAAY,KAAK;AAAA,SAAIA,KAAK,CAACC,KAAN,CAAYC,SAAZ,CAAsBC,CAA1B;AAAA,CAPC,EAWnBV,MAXmB,EAoBVL,QAAQ,CAAC,UAAD,CApBE,EAuBA,UAAAY,KAAK;AAAA,SAAIA,KAAK,CAACC,KAAN,CAAYG,WAAZ,CAAwBC,CAA5B;AAAA,CAvBL,EAyBRjB,QAAQ,CAAC,UAAD,CAzBA,EAiCnBN,KAAK,CAACwB,EAjCa,EAmCVlB,QAAQ,CAAC,UAAD,CAnCE,EAuCnBN,KAAK,CAACyB,KAvCa,EA2CnBzB,KAAK,CAAC0B,EA3Ca,EAkDA,UAAAR,KAAK;AAAA,SAAIA,KAAK,CAACC,KAAN,CAAYG,WAAZ,CAAwBC,CAA5B;AAAA,CAlDL,EAmDjBvB,KAAK,CAAC0B,EAnDW,EAmDJ1B,KAAK,CAACwB,EAnDF,CAAvB;;AA2DA,IAAMG,YAAY,GAAG,SAAfA,YAAe,OAAgC;AAAA,MAA7BC,YAA6B,QAA7BA,YAA6B;AAAA,MAAZV,KAAY;;AACnD,MAAMW,mBAAmB,GAAGpB,KAAK,CAACoB,mBAAN,CAA0BD,YAA1B,CAA5B,CADmD,CAEnD;;AAFmD,qBAGlCrB,WAAW,EAHuB;AAAA,MAG3CuB,IAH2C,gBAG3CA,IAH2C;;AAInD,MAAMC,aAAa,GAAGvB,OAAO,CAC3BqB,mBAD2B,EAE3B,UAAAG,IAAI;AAAA,WAAIA,IAAI,CAACC,MAAL,CAAYC,KAAZ,CAAkB,GAAlB,EAAuB,CAAvB,CAAJ;AAAA,GAFuB,CAA7B;AAKA,sBACE,oBAAC,iBAAD,oBAAuBhB,KAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACE,oBAAC,KAAD,CAAO,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD,CAAO,EAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD,CAAO,EAAP;AAAU,IAAA,KAAK,EAAE;AAAEG,MAAAA,CAAC,EAAE;AAAL,KAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE,oBAAC,KAAD,CAAO,EAAP;AAAU,IAAA,KAAK,EAAE;AAAEA,MAAAA,CAAC,EAAE,MAAL;AAAaE,MAAAA,CAAC,EAAE;AAAhB,KAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,eAGE,oBAAC,KAAD,CAAO,EAAP;AAAU,IAAA,OAAO,EAAE;AAAEF,MAAAA,CAAC,EAAE,MAAL;AAAaE,MAAAA,CAAC,EAAE;AAAhB,KAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGO,IAAI,CAACK,aAAL,CAAmBC,KADtB,CAHF,eAME,oBAAC,KAAD,CAAO,EAAP;AAAU,IAAA,KAAK,EAAE;AAAEf,MAAAA,CAAC,EAAE,OAAL;AAAcgB,MAAAA,EAAE,EAAE;AAAlB,KAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGP,IAAI,CAACQ,aADR,CANF,eASE,oBAAC,KAAD,CAAO,EAAP;AAAU,IAAA,KAAK,EAAE;AAAEjB,MAAAA,CAAC,EAAE,OAAL;AAAcgB,MAAAA,EAAE,EAAE;AAAlB,KAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGP,IAAI,CAACS,cAAL,CAAoBC,aADvB,CATF,eAYE,oBAAC,KAAD,CAAO,EAAP;AAAU,IAAA,KAAK,EAAE;AAAEnB,MAAAA,CAAC,EAAE,OAAL;AAAcgB,MAAAA,EAAE,EAAE;AAAlB,KAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGP,IAAI,CAACW,aADR,CAZF,eAeE,oBAAC,KAAD,CAAO,EAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAfF,eAgBE,oBAAC,KAAD,CAAO,EAAP;AAAU,IAAA,KAAK,EAAE;AAAEpB,MAAAA,CAAC,EAAE;AAAL,KAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAhBF,CADF,CADF,EAqBGQ,mBAAmB,GAClBa,MAAM,CAACC,OAAP,CAAeZ,aAAf,EAA8Ba,GAA9B,CAAkC,iBAAsBC,QAAtB,EAAmC;AAAA;AAAA,QAAjCC,GAAiC;AAAA,QAA5BC,YAA4B;;AACnEA,IAAAA,YAAY,GAAGA,YAAY,CAACH,GAAb,CAAiB,UAAAI,OAAO;AAAA;AACrCC,QAAAA,yBAAyB,EAAEvC,kBAAkB,CAACsC,OAAD;AADR,SAElCA,OAFkC;AAAA,KAAxB,CAAf,CADmE,CAMnE;;AACA,QAAME,IAAI,GAAGH,YAAY,CAACH,GAAb,CAAiB,UAAAO,IAAI;AAAA,aAAIA,IAAI,CAACC,kBAAT;AAAA,KAArB,CAAb;AACA,QAAMC,MAAM,GAAGnD,SAAS,CAACoD,GAAV,CAAcC,KAAd,CAAoB,IAApB,EAA0BL,IAA1B,CAAf;AACA,QAAMM,SAAS,GAAGT,YAAY,CAACH,GAAb,CAAiB,UAAAO,IAAI;AAAA,aACrCA,IAAI,CAACM,gBAAL,CAAsBC,WAAtB,EADqC;AAAA,KAArB,CAAlB;AAGA,QAAMC,QAAQ,GAAGzD,SAAS,CAACoD,GAAV,CAAcC,KAAd,CAAoB,IAApB,EAA0BC,SAA1B,CAAjB,CAZmE,CAanE;;AACA,QAAMI,gBAAgB,GAAGb,YAAY,CAACH,GAAb,CACvB,UAAAO,IAAI;AAAA,aAAIA,IAAI,CAACF,yBAAT;AAAA,KADmB,CAAzB;AAGA,QAAMY,iBAAiB,GAAG3D,SAAS,CAAC4D,GAAV,CAAcP,KAAd,CAAoB,IAApB,EAA0BK,gBAA1B,CAA1B;AAEA,WAAO,cACL,oBAAC,KAAD,CAAO,KAAP;AACE,MAAA,GAAG,EAAEd,GADP,CAGE;AAHF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAKE,oBAAC,KAAD,CAAO,EAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAI,MAAA,SAAS,EAAC,QAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAEE,oBAAC,KAAD,CAAO,EAAP;AAAU,MAAA,SAAS,EAAC,WAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,SAAD;AAAW,MAAA,MAAM,EAAEA,GAAnB;AAAwB,MAAA,IAAI,EAAE,EAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAFF,eAKE,oBAAC,KAAD,CAAO,EAAP;AAAU,MAAA,OAAO,EAAE;AAAEzB,QAAAA,CAAC,EAAE,MAAL;AAAaE,QAAAA,CAAC,EAAE;AAAhB,OAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAOX,UAAU,CAACkC,GAAD,CAAjB,CADF,CALF,eAQE,oBAAC,KAAD,CAAO,EAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAS1C,SAAS,CAACiD,MAAD,EAAS;AAAEU,MAAAA,UAAU,EAAE;AAAd,KAAT,CAAlB,MADF,CARF,eAWE,oBAAC,KAAD,CAAO,EAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG3D,SAAS,CAACuD,QAAD,EAAW;AACnBI,MAAAA,UAAU,EAAE;AADO,KAAX,CADZ,MADF,CAXF,eAmBE,oBAAC,KAAD,CAAO,EAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAS1D,cAAc,CAACwD,iBAAD,EAAoB,IAApB,CAAvB,CADF,CAnBF,CALF,CADK,CAAP;AA+BD,GAlDD,CADkB,gBAqDlB,oBAAC,KAAD,CAAO,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA,oBAAC,KAAD,CAAO,EAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD,CAAO,EAAP;AAAU,IAAA,OAAO,EAAE,CAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,KAAK,EAAEvD,QAAQ,CAAC,SAAD,CAFjB;AAGE,IAAA,EAAE,EAAC,SAHL;AAIE,IAAA,CAAC,EAAC,WAJJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,CADA,CA1EJ,CADF;AA0FD,CAnGD;;cAAMqB,Y;UAGapB,W;;;eAkGJoB,Y;AAAf;;;;;;;;;;0BA3KMhB,M;0BAIAC,U;0BAOAK,iB;0BA2DAU,Y","sourcesContent":["import React from 'react';\nimport styled from 'styled-components';\nimport { Loader, Table, Text } from '@makerdao/ui-components-core';\nimport BigNumber from 'bignumber.js';\nimport { TokenIcon } from './index';\nimport { formatter, prettifyNumber } from 'utils/ui';\nimport { getColor } from 'styles/theme';\nimport useLanguage from 'hooks/useLanguage';\nimport groupBy from 'lodash.groupby';\nimport { watch } from 'hooks/useObservable';\nimport { getMaxDaiAvailable } from 'utils/cdp';\n\nconst Number = styled(Text)`\n  color: ${getColor('greyText')};\n`;\n\nconst tokenNames = {\n  USDTUSDC: 'USDT/USDC',\n  USDTDAI: 'USDT/DAI',\n  USDCDAI: 'USDC/DAI',\n  USDTUSDN: 'USDT/USDN'\n};\n\nconst MarketsTableStyle = styled(Table)`\n  widht: 100%;\n  margin: 0 auto;\n  color: ${getColor('greyText')};\n\n  ${Text} {\n    color: ${getColor('greyText')};\n    font-size: ${props => props.theme.fontSizes.s};\n    text-align: center;\n  }\n\n  ${Number} {\n    font-size: 15px;\n  }\n\n  .gem {\n    color: #fff;\n  }\n\n  .profile-name {\n    color: ${getColor('greyText')};\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.m}) {\n    .gem {\n      color: ${getColor('greyText')};\n    }\n  }\n\n  td.tokenIcon{\n    padding: 10px 15px 5px 35px;\n  }\n\n  ${Table.th} {\n    padding-bottom: 18px;\n    color: ${getColor('greyText')};\n    text-align: center;\n  }\n\n  ${Table.thead}, .summary:not(:nth-last-child(2)) {\n    border-bottom: 1px solid #323b4f;\n  }\n\n  ${Table.td} {\n    padding-top: 14px;\n    padding-bottom: 13px;\n    text-align: center;\n    border-bottom: 1px solid #323b4f;\n  }\n\n  @media (max-width: ${props => props.theme.breakpoints.m}) {\n    ${Table.td}, ${Table.th} {\n    }\n    td.tokenIcon{\n      padding: 10px 15px 5px 15px;\n    }\n  }\n`;\n\nconst MarketsTable = ({ cdpTypesList, ...props }) => {\n  const collateralTypesData = watch.collateralTypesData(cdpTypesList);\n  //const debtCeilings = watch.collateralDebtCeilings(cdpTypesList);\n  const { lang } = useLanguage();\n  const cdpTypesByGem = groupBy(\n    collateralTypesData,\n    type => type.symbol.split('-')[0]\n  );\n\n  return (\n    <MarketsTableStyle {...props}>\n      <Table.thead>\n        <Table.tr>\n          <Table.th width={{ s: '0' }} />\n          <Table.th width={{ s: '30px', m: '49px' }} />\n          <Table.th display={{ s: 'none', m: 'block' }}>\n            {lang.overview_page.token}\n          </Table.th>\n          <Table.th width={{ s: 'unset', xl: '220px' }}>\n            {lang.stability_fee}\n          </Table.th>\n          <Table.th width={{ s: 'unset', xl: '220px' }}>\n            {lang.borrow_markets.min_col_ratio}\n          </Table.th>\n          <Table.th width={{ s: 'unset', xl: '220px' }}>\n            {lang.dai_available}\n          </Table.th>\n          <Table.th />\n          <Table.th width={{ s: '0' }} />\n        </Table.tr>\n      </Table.thead>\n      {collateralTypesData ? (\n        Object.entries(cdpTypesByGem).map(([gem, cdpTypesData], rowIndex) => {\n          cdpTypesData = cdpTypesData.map(ilkData => ({\n            maxDaiAvailableToGenerate: getMaxDaiAvailable(ilkData),\n            ...ilkData\n          }));\n\n          // aggregate data\n          const fees = cdpTypesData.map(data => data.annualStabilityFee);\n          const minFee = BigNumber.min.apply(null, fees);\n          const colRatios = cdpTypesData.map(data =>\n            data.liquidationRatio.toBigNumber()\n          );\n          const minRatio = BigNumber.min.apply(null, colRatios);\n          //const maxRatio = BigNumber.max.apply(null, colRatios);\n          const daiAvailableList = cdpTypesData.map(\n            data => data.maxDaiAvailableToGenerate\n          );\n          const totalDaiAvailable = BigNumber.sum.apply(null, daiAvailableList);\n\n          return [\n            <Table.tbody\n              key={gem}\n\n              //onClick={() => toggleRow(rowIndex)}\n            >\n              <Table.tr>\n                <td className=\"margin\" />\n                <Table.td className=\"tokenIcon\">\n                  <TokenIcon symbol={gem} size={50} />\n                </Table.td>\n                <Table.td display={{ s: 'none', m: 'table-cell' }}>\n                  <Text>{tokenNames[gem]}</Text>\n                </Table.td>\n                <Table.td>\n                  <Number>{formatter(minFee, { percentage: true })}%</Number>\n                </Table.td>\n                <Table.td>\n                  <Number>\n                    {formatter(minRatio, {\n                      percentage: true\n                    })}\n                    %\n                  </Number>\n                </Table.td>\n                <Table.td>\n                  <Number>{prettifyNumber(totalDaiAvailable, true)}</Number>\n                </Table.td>\n              </Table.tr>\n            </Table.tbody>\n          ];\n        })\n      ) : (\n        <Table.tbody>\n        <Table.tr>\n          <Table.td colSpan={8}>\n            <Loader\n              size=\"4rem\"\n              color={getColor('spinner')}\n              bg=\"#131824\"\n              m=\"40px auto\"\n            />\n          </Table.td>\n        </Table.tr>\n        </Table.tbody>\n      )}\n    </MarketsTableStyle>\n  );\n};\n\nexport default MarketsTable;\n"]},"metadata":{},"sourceType":"module"}