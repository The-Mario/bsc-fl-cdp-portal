{"ast":null,"code":"'use strict';\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nvar xhr = process.browser ? require('xhr') : require('request');\n\nvar inherits = require('util').inherits;\n\nvar createPayload = require('../util/create-payload.js');\n\nvar Subprovider = require('./subprovider.js');\n\nvar JsonRpcError = require('json-rpc-error');\n\nmodule.exports = RpcSource;\ninherits(RpcSource, Subprovider);\n\nfunction RpcSource(opts) {\n  var self = this;\n  self.rpcUrl = opts.rpcUrl;\n}\n\nRpcSource.prototype.handleRequest = function (payload, next, end) {\n  var self = this;\n  var targetUrl = self.rpcUrl; // overwrite id to conflict with other concurrent users\n\n  var newPayload = createPayload(payload);\n  xhr({\n    uri: targetUrl,\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(newPayload),\n    rejectUnauthorized: false\n  }, function (err, res, body) {\n    if (err) return end(new JsonRpcError.InternalError(err)); // check for error code\n\n    switch (res.statusCode) {\n      case 405:\n        return end(new JsonRpcError.MethodNotFound());\n\n      case 504:\n        // Gateway timeout\n        var msg = 'Gateway timeout. The request took too long to process. ';\n        msg += 'This can happen when querying logs over too wide a block range.';\n\n        var _err = new Error(msg);\n\n        return end(new JsonRpcError.InternalError(_err));\n\n      default:\n        if (res.statusCode != 200) {\n          return end(new JsonRpcError.InternalError(res.body));\n        }\n\n    } // parse response\n\n\n    var data = void 0;\n\n    try {\n      data = JSON.parse(body);\n    } catch (err) {\n      console.error(err.stack);\n      return end(new JsonRpcError.InternalError(err));\n    }\n\n    if (data.error) return end(data.error);\n    end(null, data.result);\n  });\n};\n\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(xhr, \"xhr\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/web3-provider-engine/dist/es5/subproviders/rpc.js\");\n  reactHotLoader.register(inherits, \"inherits\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/web3-provider-engine/dist/es5/subproviders/rpc.js\");\n  reactHotLoader.register(RpcSource, \"RpcSource\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/web3-provider-engine/dist/es5/subproviders/rpc.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":null,"metadata":{},"sourceType":"script"}