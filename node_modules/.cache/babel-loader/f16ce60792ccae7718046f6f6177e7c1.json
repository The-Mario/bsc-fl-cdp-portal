{"ast":null,"code":"\"use strict\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DependencyNotResolvedError = exports.UnknownDependencyError = exports.InvalidServiceError = exports[\"default\"] = void 0;\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar _get2 = _interopRequireDefault(require(\"@babel/runtime/helpers/get\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _wrapNativeSuper2 = _interopRequireDefault(require(\"@babel/runtime/helpers/wrapNativeSuper\"));\n\nvar _ServiceManagerBase2 = _interopRequireDefault(require(\"./ServiceManagerBase\"));\n/**\n *\n */\n\n\nvar InvalidServiceError = /*#__PURE__*/function (_Error) {\n  (0, _inherits2[\"default\"])(InvalidServiceError, _Error);\n\n  function InvalidServiceError(message) {\n    (0, _classCallCheck2[\"default\"])(this, InvalidServiceError);\n    return (0, _possibleConstructorReturn2[\"default\"])(this, (0, _getPrototypeOf2[\"default\"])(InvalidServiceError).call(this, message));\n  }\n\n  return InvalidServiceError;\n}((0, _wrapNativeSuper2[\"default\"])(Error));\n/**\n *\n */\n\n\nexports.InvalidServiceError = InvalidServiceError;\n\nvar UnknownDependencyError = /*#__PURE__*/function (_Error2) {\n  (0, _inherits2[\"default\"])(UnknownDependencyError, _Error2);\n\n  function UnknownDependencyError(service, dependency) {\n    (0, _classCallCheck2[\"default\"])(this, UnknownDependencyError);\n    return (0, _possibleConstructorReturn2[\"default\"])(this, (0, _getPrototypeOf2[\"default\"])(UnknownDependencyError).call(this, 'Injected service ' + dependency + ' is not a dependency of ' + service));\n  }\n\n  return UnknownDependencyError;\n}((0, _wrapNativeSuper2[\"default\"])(Error));\n/**\n *\n */\n\n\nexports.UnknownDependencyError = UnknownDependencyError;\n\nvar DependencyNotResolvedError = /*#__PURE__*/function (_Error3) {\n  (0, _inherits2[\"default\"])(DependencyNotResolvedError, _Error3);\n\n  function DependencyNotResolvedError(service, dependency) {\n    (0, _classCallCheck2[\"default\"])(this, DependencyNotResolvedError);\n    return (0, _possibleConstructorReturn2[\"default\"])(this, (0, _getPrototypeOf2[\"default\"])(DependencyNotResolvedError).call(this, 'Dependency ' + dependency + ' of service ' + service + ' is unavailable.'));\n  }\n\n  return DependencyNotResolvedError;\n}((0, _wrapNativeSuper2[\"default\"])(Error));\n/**\n * @param callback\n * @returns {Promise}\n * @private\n */\n\n\nexports.DependencyNotResolvedError = DependencyNotResolvedError;\n\nfunction _waitForDependencies(callback) {\n  return Promise.all(this.dependencies().map(function (dependency) {\n    return callback(dependency);\n  }));\n}\n/**\n *\n */\n\n\nvar ServiceManager = /*#__PURE__*/function (_ServiceManagerBase) {\n  (0, _inherits2[\"default\"])(ServiceManager, _ServiceManagerBase);\n  (0, _createClass2[\"default\"])(ServiceManager, null, [{\n    key: \"isValidService\",\n\n    /**\n     * @param {*} service\n     * @returns {boolean}\n     */\n    value: function isValidService(service) {\n      return service !== null && (0, _typeof2[\"default\"])(service) === 'object' && typeof service.manager === 'function';\n    }\n    /**\n     * @param {string} name\n     * @param {string[]} dependencies\n     * @param {function|null} init\n     * @param {function|null} connect\n     * @param {function|null} auth\n     */\n\n  }]);\n\n  function ServiceManager(name) {\n    var _this;\n\n    var dependencies = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    var init = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    var connect = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n    var auth = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n    (0, _classCallCheck2[\"default\"])(this, ServiceManager);\n    _this = (0, _possibleConstructorReturn2[\"default\"])(this, (0, _getPrototypeOf2[\"default\"])(ServiceManager).call(this, init, connect, auth));\n\n    if (!name) {\n      throw new Error('Service name must not be empty.');\n    }\n\n    _this._name = name;\n    _this._dependencies = dependencies;\n    _this._injections = {};\n    dependencies.forEach(function (d) {\n      return _this._injections[d] = null;\n    });\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(ServiceManager, [{\n    key: \"name\",\n    value: function name() {\n      return this._name;\n    }\n  }, {\n    key: \"dependencies\",\n    value: function dependencies() {\n      return this._dependencies;\n    }\n  }, {\n    key: \"inject\",\n    value: function inject(dependency, service) {\n      if (typeof this._injections[dependency] === 'undefined') {\n        throw new UnknownDependencyError(this.name(), dependency);\n      }\n\n      if (!ServiceManager.isValidService(service)) {\n        throw new InvalidServiceError('Cannot inject invalid service in ' + this.name());\n      }\n\n      this._injections[dependency] = service;\n      return this;\n    }\n  }, {\n    key: \"dependency\",\n    value: function dependency(name) {\n      if (!this._injections[name]) {\n        throw new DependencyNotResolvedError(this.name(), name);\n      }\n\n      return this._injections[name];\n    }\n  }, {\n    key: \"initialize\",\n    value: function initialize() {\n      var _this2 = this;\n\n      return this.initializeDependencies().then(function () {\n        return (0, _get2[\"default\"])((0, _getPrototypeOf2[\"default\"])(ServiceManager.prototype), \"initialize\", _this2).call(_this2, _this2._settings);\n      });\n    }\n  }, {\n    key: \"connect\",\n    value: function connect() {\n      var _this3 = this;\n\n      return this.connectDependencies().then(function () {\n        return (0, _get2[\"default\"])((0, _getPrototypeOf2[\"default\"])(ServiceManager.prototype), \"connect\", _this3).call(_this3);\n      });\n    }\n  }, {\n    key: \"authenticate\",\n    value: function authenticate() {\n      var _this4 = this;\n\n      return this.authenticateDependencies().then(function () {\n        return (0, _get2[\"default\"])((0, _getPrototypeOf2[\"default\"])(ServiceManager.prototype), \"authenticate\", _this4).call(_this4);\n      });\n    }\n  }, {\n    key: \"initializeDependencies\",\n    value: function initializeDependencies() {\n      var _this5 = this;\n\n      return _waitForDependencies.call(this, function (d) {\n        return _this5.dependency(d).manager().initialize();\n      });\n    }\n  }, {\n    key: \"connectDependencies\",\n    value: function connectDependencies() {\n      var _this6 = this;\n\n      return _waitForDependencies.call(this, function (d) {\n        return _this6.dependency(d).manager().connect();\n      });\n    }\n  }, {\n    key: \"authenticateDependencies\",\n    value: function authenticateDependencies() {\n      var _this7 = this;\n\n      return _waitForDependencies.call(this, function (d) {\n        return _this7.dependency(d).manager().authenticate();\n      });\n    }\n  }, {\n    key: \"createService\",\n    value: function createService() {\n      var _this8 = this;\n\n      return {\n        manager: function manager() {\n          return _this8;\n        }\n      };\n    }\n  }]);\n  return ServiceManager;\n}(_ServiceManagerBase2[\"default\"]);\n\nexports[\"default\"] = ServiceManager;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(_typeof2, \"_typeof2\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/ServiceManager.js\");\n  reactHotLoader.register(_get2, \"_get2\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/ServiceManager.js\");\n  reactHotLoader.register(_createClass2, \"_createClass2\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/ServiceManager.js\");\n  reactHotLoader.register(_classCallCheck2, \"_classCallCheck2\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/ServiceManager.js\");\n  reactHotLoader.register(_possibleConstructorReturn2, \"_possibleConstructorReturn2\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/ServiceManager.js\");\n  reactHotLoader.register(_getPrototypeOf2, \"_getPrototypeOf2\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/ServiceManager.js\");\n  reactHotLoader.register(_inherits2, \"_inherits2\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/ServiceManager.js\");\n  reactHotLoader.register(_wrapNativeSuper2, \"_wrapNativeSuper2\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/ServiceManager.js\");\n  reactHotLoader.register(_ServiceManagerBase2, \"_ServiceManagerBase2\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/ServiceManager.js\");\n  reactHotLoader.register(InvalidServiceError, \"InvalidServiceError\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/ServiceManager.js\");\n  reactHotLoader.register(UnknownDependencyError, \"UnknownDependencyError\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/ServiceManager.js\");\n  reactHotLoader.register(DependencyNotResolvedError, \"DependencyNotResolvedError\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/ServiceManager.js\");\n  reactHotLoader.register(_waitForDependencies, \"_waitForDependencies\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/ServiceManager.js\");\n  reactHotLoader.register(ServiceManager, \"ServiceManager\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/ServiceManager.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":null,"metadata":{},"sourceType":"script"}