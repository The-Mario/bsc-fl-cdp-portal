{"ast":null,"code":"\"use strict\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _ServiceManager = _interopRequireDefault(require(\"./ServiceManager\"));\n\nvar _ServiceType = _interopRequireDefault(require(\"./ServiceType\"));\n\nvar _ServiceState = _interopRequireDefault(require(\"./ServiceState\"));\n/**\n * @param {string} type\n * @private\n */\n\n\nfunction _defineLifeCycleMethods(type) {\n  if (typeof this.initialize === 'undefined') {\n    this.initialize = function () {};\n  }\n\n  if (type !== _ServiceType[\"default\"].LOCAL) {\n    if (typeof this.connect === 'undefined') {\n      this.connect = function () {};\n    }\n\n    this.disconnect = function () {};\n  }\n\n  if (type === _ServiceType[\"default\"].PRIVATE) {\n    if (typeof this.authenticate === 'undefined') {\n      this.authenticate = function () {};\n    }\n\n    this.deauthenticate = function () {};\n  }\n}\n/**\n * @param {string} type\n * @param {string} name\n * @param {string[]} dependencies\n * @returns {ServiceManager}\n * @private\n */\n\n\nfunction _buildServiceManager(type, name, dependencies) {\n  var _this = this;\n\n  var connect = type === _ServiceType[\"default\"].LOCAL ? null : function (disconnect) {\n    _this.disconnect = disconnect;\n    return _this.connect();\n  };\n  var auth = type !== _ServiceType[\"default\"].PRIVATE ? null : function (deauthenticate) {\n    _this.deauthenticate = deauthenticate;\n    return _this.authenticate();\n  };\n  return new _ServiceManager[\"default\"](name, dependencies, function (settings) {\n    return _this.initialize(settings);\n  }, connect, auth);\n}\n/**\n * @param {ServiceManager} mgr\n * @private\n */\n\n\nfunction _installLifeCycleHooks(mgr) {\n  var _this2 = this;\n\n  mgr.onInitialized(function () {\n    if (mgr.type() !== _ServiceType[\"default\"].LOCAL) {\n      mgr.dependencies().forEach(function (d) {\n        _this2.get(d).manager().onDisconnected(function () {\n          return _this2.disconnect();\n        });\n      });\n    }\n\n    if (mgr.type() === _ServiceType[\"default\"].PRIVATE) {\n      mgr.dependencies().forEach(function (d) {\n        _this2.get(d).manager().onDeauthenticated(function () {\n          return _this2.deauthenticate();\n        });\n      });\n    }\n  });\n}\n/**\n * @private\n */\n\n\nfunction _guardLifeCycleMethods() {\n  var original = {\n    initialize: this.initialize,\n    connect: this.connect,\n    authenticate: this.authenticate\n  };\n\n  this.initialize = function (settings) {\n    if (this.manager().state() !== _ServiceState[\"default\"].INITIALIZING) {\n      throw new Error('Expected state INITIALIZING, but got ' + this.manager().state() + '. Did you mean to call service.manager().initialize() instead of service.initialize()?');\n    }\n\n    return original.initialize.apply(this, [settings]);\n  };\n\n  if (typeof original.connect !== 'undefined') {\n    this.connect = function () {\n      if (this.manager().state() !== _ServiceState[\"default\"].CONNECTING) {\n        throw new Error('Expected state CONNECTING, but got ' + this.manager().state() + '. Did you mean to call service.manager().connect() instead of service.connect()?');\n      }\n\n      return original.connect.apply(this);\n    };\n  }\n\n  if (typeof original.authenticate !== 'undefined') {\n    this.authenticate = function () {\n      if (this.manager().state() !== _ServiceState[\"default\"].AUTHENTICATING) {\n        throw new Error('Expected state AUTHENTICATING, but got ' + this.manager().state() + '. Did you mean to call service.manager().authenticate() instead of service.authenticate()?');\n      }\n\n      return original.authenticate.apply(this);\n    };\n  }\n}\n\nvar ServiceBase = /*#__PURE__*/function () {\n  /**\n   * @param {string} type\n   * @param {string} name\n   * @param {string[]} dependencies\n   */\n  function ServiceBase(type, name) {\n    var dependencies = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n    (0, _classCallCheck2[\"default\"])(this, ServiceBase);\n\n    if (typeof _ServiceType[\"default\"][type] === 'undefined') {\n      throw new Error('Invalid ServiceType: ' + type);\n    }\n\n    _defineLifeCycleMethods.call(this, type);\n\n    this._serviceManager = _buildServiceManager.call(this, type, name, dependencies);\n\n    _installLifeCycleHooks.call(this, this._serviceManager);\n\n    _guardLifeCycleMethods.call(this);\n  }\n  /**\n   * @returns {ServiceManager}\n   */\n\n\n  (0, _createClass2[\"default\"])(ServiceBase, [{\n    key: \"manager\",\n    value: function manager() {\n      return this._serviceManager;\n    }\n    /**\n     * @param {string} dependency\n     * @returns {ServiceBase}\n     */\n\n  }, {\n    key: \"get\",\n    value: function get(dependency) {\n      return this._serviceManager.dependency(dependency);\n    }\n  }]);\n  return ServiceBase;\n}();\n\nvar _default = ServiceBase;\nexports[\"default\"] = _default;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(_classCallCheck2, \"_classCallCheck2\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/ServiceBase.js\");\n  reactHotLoader.register(_createClass2, \"_createClass2\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/ServiceBase.js\");\n  reactHotLoader.register(_ServiceManager, \"_ServiceManager\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/ServiceBase.js\");\n  reactHotLoader.register(_ServiceType, \"_ServiceType\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/ServiceBase.js\");\n  reactHotLoader.register(_ServiceState, \"_ServiceState\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/ServiceBase.js\");\n  reactHotLoader.register(_defineLifeCycleMethods, \"_defineLifeCycleMethods\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/ServiceBase.js\");\n  reactHotLoader.register(_buildServiceManager, \"_buildServiceManager\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/ServiceBase.js\");\n  reactHotLoader.register(_installLifeCycleHooks, \"_installLifeCycleHooks\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/ServiceBase.js\");\n  reactHotLoader.register(_guardLifeCycleMethods, \"_guardLifeCycleMethods\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/ServiceBase.js\");\n  reactHotLoader.register(ServiceBase, \"ServiceBase\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/ServiceBase.js\");\n  reactHotLoader.register(_default, \"_default\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/ServiceBase.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":null,"metadata":{},"sourceType":"script"}