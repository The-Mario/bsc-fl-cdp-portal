{"ast":null,"code":"\"use strict\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.orderServices = orderServices;\nObject.defineProperty(exports, \"InvalidServiceError\", {\n  enumerable: true,\n  get: function get() {\n    return _ServiceManager.InvalidServiceError;\n  }\n});\nexports.ServiceNotFoundError = exports.ServiceAlreadyRegisteredError = exports.ExtractedServiceError = exports[\"default\"] = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _wrapNativeSuper2 = _interopRequireDefault(require(\"@babel/runtime/helpers/wrapNativeSuper\"));\n\nvar _values = _interopRequireDefault(require(\"lodash/values\"));\n\nvar _uniq = _interopRequireDefault(require(\"lodash/uniq\"));\n\nvar _ServiceManager = _interopRequireWildcard(require(\"./ServiceManager\"));\n\nvar _toposort = _interopRequireDefault(require(\"toposort\"));\n\nvar ServiceAlreadyRegisteredError = /*#__PURE__*/function (_Error) {\n  (0, _inherits2[\"default\"])(ServiceAlreadyRegisteredError, _Error);\n\n  function ServiceAlreadyRegisteredError(name) {\n    (0, _classCallCheck2[\"default\"])(this, ServiceAlreadyRegisteredError); // prettier-ignore\n\n    return (0, _possibleConstructorReturn2[\"default\"])(this, (0, _getPrototypeOf2[\"default\"])(ServiceAlreadyRegisteredError).call(this, 'Service with name \\'' + name + '\\' is already registered with this container.'));\n  }\n\n  return ServiceAlreadyRegisteredError;\n}((0, _wrapNativeSuper2[\"default\"])(Error));\n\nexports.ServiceAlreadyRegisteredError = ServiceAlreadyRegisteredError;\n\nvar ServiceNotFoundError = /*#__PURE__*/function (_Error2) {\n  (0, _inherits2[\"default\"])(ServiceNotFoundError, _Error2);\n\n  function ServiceNotFoundError(name) {\n    (0, _classCallCheck2[\"default\"])(this, ServiceNotFoundError); // prettier-ignore\n\n    return (0, _possibleConstructorReturn2[\"default\"])(this, (0, _getPrototypeOf2[\"default\"])(ServiceNotFoundError).call(this, 'Service with name \\'' + name + '\\' cannot be found in this container.'));\n  }\n\n  return ServiceNotFoundError;\n}((0, _wrapNativeSuper2[\"default\"])(Error));\n\nexports.ServiceNotFoundError = ServiceNotFoundError;\n\nvar ExtractedServiceError = /*#__PURE__*/function (_Error3) {\n  (0, _inherits2[\"default\"])(ExtractedServiceError, _Error3);\n\n  function ExtractedServiceError(name) {\n    (0, _classCallCheck2[\"default\"])(this, ExtractedServiceError); // prettier-ignore\n\n    return (0, _possibleConstructorReturn2[\"default\"])(this, (0, _getPrototypeOf2[\"default\"])(ExtractedServiceError).call(this, 'Service with name \\'' + name + '\\' has been extracted from the core dai.js library into a discrete plugin. Please refer to the documentation here to install and add it to your configuration: \\n\\n https://github.com/makerdao/dai.js/wiki/Basic-Usage-(Plugins) \\n\\n'));\n  }\n\n  return ExtractedServiceError;\n}((0, _wrapNativeSuper2[\"default\"])(Error)); // exported just for testing\n\n\nexports.ExtractedServiceError = ExtractedServiceError;\n\nfunction orderServices(services) {\n  var edges = [];\n  var servicesWithoutDeps = [];\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    var _loop = function _loop() {\n      var service = _step.value;\n      var name = service.manager().name();\n      var depNames = service.manager().dependencies();\n\n      if (depNames.length === 0) {\n        servicesWithoutDeps.push(name);\n      } else {\n        depNames.forEach(function (dn) {\n          return edges.push([dn, name]);\n        });\n      }\n    };\n\n    for (var _iterator = services[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      _loop();\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return (0, _uniq[\"default\"])((0, _toposort[\"default\"])(edges).concat(servicesWithoutDeps));\n}\n\nvar Container = /*#__PURE__*/function () {\n  function Container() {\n    (0, _classCallCheck2[\"default\"])(this, Container);\n    this._services = {};\n    this.isAuthenticated = false;\n  }\n\n  (0, _createClass2[\"default\"])(Container, [{\n    key: \"register\",\n    value: function register(service) {\n      var name = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n      if (!_ServiceManager[\"default\"].isValidService(service)) {\n        throw new _ServiceManager.InvalidServiceError('Service must be an object with manager() method returning a valid ServiceManager');\n      }\n\n      name = name || service.manager().name();\n      var s = this.service(name, false);\n\n      if (s !== undefined && s !== service) {\n        throw new ServiceAlreadyRegisteredError(name);\n      }\n\n      this._services[name] = service;\n      return this;\n    }\n  }, {\n    key: \"service\",\n    value: function service(name) {\n      var throwIfMissing = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var extractedServices = ['exchange'];\n\n      if (!name) {\n        throw new Error('Provide a service name.');\n      }\n\n      if (!this._services[name] && throwIfMissing && extractedServices.includes(name)) {\n        throw new ExtractedServiceError(name);\n      }\n\n      if (!this._services[name] && throwIfMissing) {\n        throw new ServiceNotFoundError(name);\n      }\n\n      return this._services[name];\n    }\n  }, {\n    key: \"getRegisteredServiceNames\",\n    value: function getRegisteredServiceNames() {\n      return Object.keys(this._services);\n    }\n  }, {\n    key: \"injectDependencies\",\n    value: function injectDependencies() {\n      var services = (0, _values[\"default\"])(this._services);\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = services[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var service = _step2.value;\n          var manager = service.manager();\n          var _iteratorNormalCompletion3 = true;\n          var _didIteratorError3 = false;\n          var _iteratorError3 = undefined;\n\n          try {\n            for (var _iterator3 = manager.dependencies()[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n              var name = _step3.value;\n              var dep = this._services[name];\n              if (!dep) throw new ServiceNotFoundError(name);\n              manager.inject(name, this._services[name]);\n            }\n          } catch (err) {\n            _didIteratorError3 = true;\n            _iteratorError3 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion3 && _iterator3[\"return\"] != null) {\n                _iterator3[\"return\"]();\n              }\n            } finally {\n              if (_didIteratorError3) {\n                throw _iteratorError3;\n              }\n            }\n          }\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n            _iterator2[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"initialize\",\n    value: function initialize() {\n      return this._waitForServices(function (s) {\n        return s.manager().initialize();\n      });\n    }\n  }, {\n    key: \"connect\",\n    value: function connect() {\n      return this._waitForServices(function (s) {\n        return s.manager().connect();\n      });\n    }\n  }, {\n    key: \"authenticate\",\n    value: function authenticate() {\n      var _this = this;\n\n      return this._waitForServices(function (s) {\n        return s.manager().authenticate();\n      }).then(function () {\n        _this.isAuthenticated = true;\n      });\n    }\n  }, {\n    key: \"_waitForServices\",\n    value: function () {\n      var _waitForServices2 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(callback) {\n        var _iteratorNormalCompletion4, _didIteratorError4, _iteratorError4, _iterator4, _step4, name, service;\n\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!this._orderedServiceNames) {\n                  this._orderedServiceNames = orderServices((0, _values[\"default\"])(this._services));\n                }\n\n                _iteratorNormalCompletion4 = true;\n                _didIteratorError4 = false;\n                _iteratorError4 = undefined;\n                _context.prev = 4;\n                _iterator4 = this._orderedServiceNames[Symbol.iterator]();\n\n              case 6:\n                if (_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done) {\n                  _context.next = 16;\n                  break;\n                }\n\n                name = _step4.value;\n                service = this._services[name];\n\n                if (service) {\n                  _context.next = 11;\n                  break;\n                }\n\n                throw new Error(\"No service for \".concat(name));\n\n              case 11:\n                _context.next = 13;\n                return callback(this._services[name]);\n\n              case 13:\n                _iteratorNormalCompletion4 = true;\n                _context.next = 6;\n                break;\n\n              case 16:\n                _context.next = 22;\n                break;\n\n              case 18:\n                _context.prev = 18;\n                _context.t0 = _context[\"catch\"](4);\n                _didIteratorError4 = true;\n                _iteratorError4 = _context.t0;\n\n              case 22:\n                _context.prev = 22;\n                _context.prev = 23;\n\n                if (!_iteratorNormalCompletion4 && _iterator4[\"return\"] != null) {\n                  _iterator4[\"return\"]();\n                }\n\n              case 25:\n                _context.prev = 25;\n\n                if (!_didIteratorError4) {\n                  _context.next = 28;\n                  break;\n                }\n\n                throw _iteratorError4;\n\n              case 28:\n                return _context.finish(25);\n\n              case 29:\n                return _context.finish(22);\n\n              case 30:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[4, 18, 22, 30], [23,, 25, 29]]);\n      }));\n\n      function _waitForServices(_x) {\n        return _waitForServices2.apply(this, arguments);\n      }\n\n      return _waitForServices;\n    }()\n  }]);\n  return Container;\n}();\n\nexports[\"default\"] = Container;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(_regenerator, \"_regenerator\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/Container.js\");\n  reactHotLoader.register(_asyncToGenerator2, \"_asyncToGenerator2\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/Container.js\");\n  reactHotLoader.register(_createClass2, \"_createClass2\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/Container.js\");\n  reactHotLoader.register(_classCallCheck2, \"_classCallCheck2\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/Container.js\");\n  reactHotLoader.register(_possibleConstructorReturn2, \"_possibleConstructorReturn2\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/Container.js\");\n  reactHotLoader.register(_getPrototypeOf2, \"_getPrototypeOf2\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/Container.js\");\n  reactHotLoader.register(_inherits2, \"_inherits2\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/Container.js\");\n  reactHotLoader.register(_wrapNativeSuper2, \"_wrapNativeSuper2\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/Container.js\");\n  reactHotLoader.register(_values, \"_values\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/Container.js\");\n  reactHotLoader.register(_uniq, \"_uniq\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/Container.js\");\n  reactHotLoader.register(_ServiceManager, \"_ServiceManager\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/Container.js\");\n  reactHotLoader.register(_toposort, \"_toposort\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/Container.js\");\n  reactHotLoader.register(ServiceAlreadyRegisteredError, \"ServiceAlreadyRegisteredError\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/Container.js\");\n  reactHotLoader.register(ServiceNotFoundError, \"ServiceNotFoundError\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/Container.js\");\n  reactHotLoader.register(ExtractedServiceError, \"ExtractedServiceError\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/Container.js\");\n  reactHotLoader.register(orderServices, \"orderServices\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/Container.js\");\n  reactHotLoader.register(Container, \"Container\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/@makerdao/services-core/dist/Container.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":null,"metadata":{},"sourceType":"script"}