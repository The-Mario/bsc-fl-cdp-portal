{"ast":null,"code":"import _objectSpread from \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _regeneratorRuntime from \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport { currencies, getCurrency } from '../Currency';\n\nvar Erc20Token = /*#__PURE__*/function () {\n  function Erc20Token(contract, web3Service) {\n    var decimals = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 18;\n    var symbol = arguments.length > 3 ? arguments[3] : undefined;\n    var currency = arguments.length > 4 ? arguments[4] : undefined;\n\n    _classCallCheck(this, Erc20Token);\n\n    this._contract = contract;\n    this._web3 = web3Service;\n    this._decimals = decimals;\n    this.symbol = symbol;\n    this._currency = currency || currencies[symbol];\n  }\n\n  _createClass(Erc20Token, [{\n    key: \"allowance\",\n    value: function () {\n      var _allowance = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(tokenOwner, spender) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.t0 = this;\n                _context.next = 3;\n                return this._contract.allowance(tokenOwner, spender);\n\n              case 3:\n                _context.t1 = _context.sent;\n                return _context.abrupt(\"return\", _context.t0._valueFromContract.call(_context.t0, _context.t1));\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function allowance(_x, _x2) {\n        return _allowance.apply(this, arguments);\n      }\n\n      return allowance;\n    }()\n  }, {\n    key: \"balance\",\n    value: function () {\n      var _balance = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                return _context2.abrupt(\"return\", this.balanceOf(this._web3.currentAddress()));\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function balance() {\n        return _balance.apply(this, arguments);\n      }\n\n      return balance;\n    }()\n  }, {\n    key: \"balanceOf\",\n    value: function () {\n      var _balanceOf = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(owner) {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.t0 = this;\n                _context3.next = 3;\n                return this._contract.balanceOf(owner);\n\n              case 3:\n                _context3.t1 = _context3.sent;\n                return _context3.abrupt(\"return\", _context3.t0._valueFromContract.call(_context3.t0, _context3.t1));\n\n              case 5:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function balanceOf(_x3) {\n        return _balanceOf.apply(this, arguments);\n      }\n\n      return balanceOf;\n    }()\n  }, {\n    key: \"totalSupply\",\n    value: function () {\n      var _totalSupply = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.t0 = this;\n                _context4.next = 3;\n                return this._contract.totalSupply();\n\n              case 3:\n                _context4.t1 = _context4.sent;\n                return _context4.abrupt(\"return\", _context4.t0._valueFromContract.call(_context4.t0, _context4.t1));\n\n              case 5:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function totalSupply() {\n        return _totalSupply.apply(this, arguments);\n      }\n\n      return totalSupply;\n    }()\n  }, {\n    key: \"address\",\n    value: function address() {\n      return this._contract.address;\n    }\n  }, {\n    key: \"_valueForContract\",\n    value: function _valueForContract(value) {\n      var unit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this._currency;\n      return this._getCurrency(value, unit).toFixed(this._decimals);\n    }\n  }, {\n    key: \"_valueFromContract\",\n    value: function _valueFromContract(value) {\n      return this._currency(value, -1 * this._decimals);\n    }\n  }, {\n    key: \"approve\",\n    value: function approve(spender, value) {\n      var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n          _ref$unit = _ref.unit,\n          unit = _ref$unit === void 0 ? this._currency : _ref$unit,\n          options = _objectWithoutProperties(_ref, [\"unit\"]);\n\n      return this._contract.approve(spender, this._valueForContract(value, unit), _objectSpread({\n        metadata: {\n          action: {\n            name: 'approve',\n            spender: spender,\n            allowance: this._getCurrency(value, unit),\n            allowing: value != '0'\n          }\n        }\n      }, options));\n    }\n  }, {\n    key: \"approveUnlimited\",\n    value: function approveUnlimited(spender) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      if (!spender) spender = this._web3.currentAddress();\n      return this._contract.approve(spender, -1, _objectSpread({\n        metadata: {\n          action: {\n            name: 'approve',\n            spender: spender,\n            allowance: Number.MAX_SAFE_INTEGER,\n            allowing: true,\n            unlimited: true\n          }\n        }\n      }, options));\n    }\n  }, {\n    key: \"transfer\",\n    value: function transfer(to, value) {\n      var _ref2 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n          _ref2$unit = _ref2.unit,\n          unit = _ref2$unit === void 0 ? this._currency : _ref2$unit,\n          promise = _ref2.promise;\n\n      return this._contract.transfer(to, this._valueForContract(value, unit), {\n        metadata: {\n          action: {\n            name: 'transfer',\n            from: this._web3.currentAddress(),\n            to: to,\n            amount: this._getCurrency(value, unit)\n          }\n        },\n        promise: promise\n      });\n    }\n  }, {\n    key: \"transferFrom\",\n    value: function transferFrom(from, to, value) {\n      var _ref3 = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {},\n          _ref3$unit = _ref3.unit,\n          unit = _ref3$unit === void 0 ? this._currency : _ref3$unit,\n          promise = _ref3.promise;\n\n      return this._contract.transferFrom(from, to, this._valueForContract(value, unit), {\n        metadata: {\n          action: {\n            name: 'transfer',\n            from: from,\n            to: to,\n            amount: getCurrency(value, unit)\n          }\n        },\n        promise: promise\n      });\n    }\n  }, {\n    key: \"_getCurrency\",\n    value: function _getCurrency(amount, unit) {\n      if (unit == this._currency) return this._currency(amount);\n      return getCurrency(amount, unit);\n    }\n  }, {\n    key: \"__reactstandin__regenerateByEval\",\n    // @ts-ignore\n    value: function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n\n  return Erc20Token;\n}();\n\nexport { Erc20Token as default };\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(Erc20Token, \"Erc20Token\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/src/libs/dai/src/eth/tokens/Erc20Token.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/src/libs/dai/src/eth/tokens/Erc20Token.js"],"names":["currencies","getCurrency","Erc20Token","contract","web3Service","decimals","symbol","currency","_contract","_web3","_decimals","_currency","tokenOwner","spender","allowance","_valueFromContract","balanceOf","currentAddress","owner","totalSupply","address","value","unit","_getCurrency","toFixed","options","approve","_valueForContract","metadata","action","name","allowing","Number","MAX_SAFE_INTEGER","unlimited","to","promise","transfer","from","amount","transferFrom"],"mappings":"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","sourcesContent":["import { currencies, getCurrency } from '../Currency';\n\nexport default class Erc20Token {\n  constructor(contract, web3Service, decimals = 18, symbol, currency) {\n    this._contract = contract;\n    this._web3 = web3Service;\n    this._decimals = decimals;\n    this.symbol = symbol;\n    this._currency = currency || currencies[symbol];\n  }\n\n  async allowance(tokenOwner, spender) {\n    return this._valueFromContract(\n      await this._contract.allowance(tokenOwner, spender)\n    );\n  }\n\n  async balance() {\n    return this.balanceOf(this._web3.currentAddress());\n  }\n\n  async balanceOf(owner) {\n    return this._valueFromContract(await this._contract.balanceOf(owner));\n  }\n\n  async totalSupply() {\n    return this._valueFromContract(await this._contract.totalSupply());\n  }\n\n  address() {\n    return this._contract.address;\n  }\n\n  _valueForContract(value, unit = this._currency) {\n    return this._getCurrency(value, unit).toFixed(this._decimals);\n  }\n\n  _valueFromContract(value) {\n    return this._currency(value, -1 * this._decimals);\n  }\n\n  approve(spender, value, { unit = this._currency, ...options } = {}) {\n    return this._contract.approve(\n      spender,\n      this._valueForContract(value, unit),\n      {\n        metadata: {\n          action: {\n            name: 'approve',\n            spender,\n            allowance: this._getCurrency(value, unit),\n            allowing: value != '0'\n          }\n        },\n        ...options\n      }\n    );\n  }\n\n  approveUnlimited(spender, options = {}) {\n    if (!spender) spender = this._web3.currentAddress();\n    return this._contract.approve(spender, -1, {\n      metadata: {\n        action: {\n          name: 'approve',\n          spender,\n          allowance: Number.MAX_SAFE_INTEGER,\n          allowing: true,\n          unlimited: true\n        }\n      },\n      ...options\n    });\n  }\n\n  transfer(to, value, { unit = this._currency, promise } = {}) {\n    return this._contract.transfer(to, this._valueForContract(value, unit), {\n      metadata: {\n        action: {\n          name: 'transfer',\n          from: this._web3.currentAddress(),\n          to,\n          amount: this._getCurrency(value, unit)\n        }\n      },\n      promise\n    });\n  }\n\n  transferFrom(from, to, value, { unit = this._currency, promise } = {}) {\n    return this._contract.transferFrom(\n      from,\n      to,\n      this._valueForContract(value, unit),\n      {\n        metadata: {\n          action: {\n            name: 'transfer',\n            from,\n            to,\n            amount: getCurrency(value, unit)\n          }\n        },\n        promise\n      }\n    );\n  }\n\n  _getCurrency(amount, unit) {\n    if (unit == this._currency) return this._currency(amount);\n    return getCurrency(amount, unit);\n  }\n}\n"]},"metadata":{},"sourceType":"module"}