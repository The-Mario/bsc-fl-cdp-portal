{"ast":null,"code":"import _regeneratorRuntime from \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/src/components/CDPDisplay/Presentation.js\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport React, { useEffect, useState } from 'react';\nimport { Address } from '@makerdao/ui-components-core';\nimport useLanguage from 'hooks/useLanguage';\nimport useEventHistory from 'hooks/useEventHistory';\nimport useMaker from 'hooks/useMaker';\nimport { TextBlock } from 'components/Typography';\nimport PageContentLayout from 'layouts/PageContentLayout';\nimport { Box, Grid, Flex, Text } from '@makerdao/ui-components-core';\nimport History from './History';\nimport { ActionButton, ActionContainerRow, AmountDisplay, CdpViewCard, InfoContainerRow } from './subcomponents';\nimport theme, { getColor } from '../../styles/theme';\nimport FullScreenAction from './FullScreenAction';\nimport debug from 'debug';\nimport useNotification from 'hooks/useNotification';\nimport useAnalytics from 'hooks/useAnalytics';\nimport useEmergencyShutdown from 'hooks/useEmergencyShutdown';\nimport { FeatureFlags } from 'utils/constants';\nimport { NotificationList, SAFETY_LEVELS } from 'utils/constants';\nimport { formatter } from 'utils/ui';\nimport BigNumber from 'bignumber.js';\nimport NextPriceLiquidation from '../NotificationContent/NextPriceLiquidatation';\nimport useOraclePrices from 'hooks/useOraclePrices';\nvar log = debug('maker:CDPDisplay/Presentation');\nvar FF_VAULT_HISTORY = FeatureFlags.FF_VAULT_HISTORY;\n\nvar _default = function _default(_ref) {\n  var _this = this;\n\n  var vault = _ref.vault,\n      showSidebar = _ref.showSidebar,\n      account = _ref.account,\n      network = _ref.network,\n      cdpOwner = _ref.cdpOwner,\n      _ref$showVaultHistory = _ref.showVaultHistory,\n      showVaultHistory = _ref$showVaultHistory === void 0 ? true : _ref$showVaultHistory;\n\n  var _useLanguage = useLanguage(),\n      lang = _useLanguage.lang;\n\n  var _useMaker = useMaker(),\n      maker = _useMaker.maker;\n\n  var _useEmergencyShutdown = useEmergencyShutdown(),\n      emergencyShutdownActive = _useEmergencyShutdown.emergencyShutdownActive;\n\n  var _useAnalytics = useAnalytics('CollateralView'),\n      trackBtnClick = _useAnalytics.trackBtnClick;\n\n  var collateralAmount = vault.collateralAmount,\n      collateralValue = vault.collateralValue,\n      rawCollateralizationRatio = vault.collateralizationRatio,\n      rawLiquidationPrice = vault.liquidationPrice,\n      vaultType = vault.vaultType,\n      unlockedCollateral = vault.unlockedCollateral,\n      liquidationRatio = vault.liquidationRatio,\n      minSafeCollateralAmount = vault.minSafeCollateralAmount,\n      debtValue = vault.debtValue,\n      debtFloor = vault.debtFloor;\n  log(\"Rendering vault #\".concat(vault.id));\n  var gem = collateralAmount === null || collateralAmount === void 0 ? void 0 : collateralAmount.symbol;\n  var liquidationPrice = formatter(rawLiquidationPrice);\n  var collateralizationRatio = formatter(rawCollateralizationRatio, {\n    percentage: true\n  }); // eslint-disable-next-line react-hooks/rules-of-hooks\n\n  var eventHistory = FF_VAULT_HISTORY && showVaultHistory ? useEventHistory(vault.id) : null;\n  if (['Infinity', Infinity, 'NaN', NaN].includes(liquidationPrice)) liquidationPrice = lang.cdp_page.not_applicable;\n  if (['Infinity', Infinity, 'NaN', NaN].includes(collateralizationRatio)) collateralizationRatio = lang.cdp_page.not_applicable;\n  var isOwner = account && account.address.toLowerCase() === cdpOwner.toLowerCase();\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      actionShown = _useState2[0],\n      setActionShown = _useState2[1];\n\n  var _useNotification = useNotification(),\n      addNotification = _useNotification.addNotification,\n      deleteNotifications = _useNotification.deleteNotifications,\n      notificationExists = _useNotification.notificationExists;\n\n  var _useOraclePrices = useOraclePrices({\n    gem: gem\n  }),\n      currentPrice = _useOraclePrices.currentPrice,\n      nextPrice = _useOraclePrices.nextPrice;\n\n  var vaultUnderDustLimit = debtValue.toBigNumber().gt(0) && debtValue.toBigNumber().lt(debtFloor);\n  var totalGenerateableDai = debtValue.plus(vault.daiAvailable);\n  useEffect(function () {\n    if (isOwner && (eventHistory === null || eventHistory === void 0 ? void 0 : eventHistory.length) && eventHistory.some(function (_ref2) {\n      var type = _ref2.type;\n      return type === 'BITE';\n    })) {\n      var now = Date.now();\n      var sevenDays = 7 * 24 * 60 * 60 * 1000;\n      var cutOff = Math.floor((now - sevenDays) / 1000);\n      var recentEvents = eventHistory.filter(function (_ref3) {\n        var type = _ref3.type;\n        return type === 'BITE';\n      }).filter(function (_ref4) {\n        var timestamp = _ref4.timestamp;\n        return timestamp >= cutOff;\n      });\n      var sumCollateralLiquidated = recentEvents.reduce(function (acc, _ref5) {\n        var amount = _ref5.amount;\n        return acc.plus(amount);\n      }, BigNumber(0));\n\n      if (recentEvents === null || recentEvents === void 0 ? void 0 : recentEvents.length) {\n        addNotification({\n          id: NotificationList.VAULT_IS_LIQUIDATED,\n          content: lang.formatString(lang.notifications.vault_is_liquidated, \"\".concat(formatter(sumCollateralLiquidated), \" \").concat(gem)),\n          level: SAFETY_LEVELS.WARNING\n        });\n      }\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [eventHistory === null || eventHistory === void 0 ? void 0 : eventHistory.length]);\n  useEffect(function () {\n    var VAULT_BELOW_NEXT_PRICE = NotificationList.VAULT_BELOW_NEXT_PRICE,\n        VAULT_BELOW_CURRENT_PRICE = NotificationList.VAULT_BELOW_CURRENT_PRICE;\n\n    if (isOwner && !['Infinity', Infinity, 'NaN', NaN].includes(rawLiquidationPrice.toBigNumber().toString()) && currentPrice && nextPrice) {\n      if (currentPrice.lt(rawLiquidationPrice.toBigNumber()) && !notificationExists(VAULT_BELOW_CURRENT_PRICE)) {\n        var currentCollateralNeeded = minSafeCollateralAmount.toBigNumber().minus(collateralAmount.toBigNumber());\n        var currentDebtNeeded = debtValue.toBigNumber().minus(collateralValue.toBigNumber().div(liquidationRatio.toBigNumber()));\n\n        if (notificationExists(VAULT_BELOW_NEXT_PRICE)) {\n          deleteNotifications([VAULT_BELOW_NEXT_PRICE]);\n        }\n\n        addNotification({\n          id: NotificationList.VAULT_BELOW_CURRENT_PRICE,\n          content: lang.formatString(lang.notifications.vault_below_current_price, vaultType, \"\".concat(formatter(currentCollateralNeeded), \" \").concat(gem), \"\".concat(formatter(currentDebtNeeded), \" USDFL\")),\n          level: SAFETY_LEVELS.DANGER\n        });\n      } else if (currentPrice.gte(rawLiquidationPrice.toBigNumber()) && nextPrice.lt(rawLiquidationPrice.toBigNumber()) && !notificationExists(NotificationList.VAULT_BELOW_NEXT_PRICE)) {\n        var nextCollateralNeeded = debtValue.times(liquidationRatio).div(nextPrice).toBigNumber().minus(collateralAmount.toBigNumber());\n        var nextDebtNeeded = debtValue.toBigNumber().minus(collateralAmount.times(nextPrice).toBigNumber().div(liquidationRatio.toBigNumber()));\n\n        if (notificationExists(VAULT_BELOW_CURRENT_PRICE)) {\n          deleteNotifications([VAULT_BELOW_CURRENT_PRICE]);\n        }\n\n        addNotification({\n          id: NotificationList.VAULT_BELOW_NEXT_PRICE,\n          content: /*#__PURE__*/React.createElement(NextPriceLiquidation, {\n            vaultType: vaultType,\n            collateral: formatter(nextCollateralNeeded),\n            debt: formatter(nextDebtNeeded),\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 13\n            }\n          }),\n          level: SAFETY_LEVELS.WARNING\n        });\n      }\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [currentPrice, nextPrice, rawLiquidationPrice, debtValue, collateralAmount, collateralValue, liquidationRatio, minSafeCollateralAmount]);\n  useEffect(function () {\n    var reclaimCollateral = /*#__PURE__*/function () {\n      var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var txObject;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                txObject = maker.service('mcd:cdpManager').reclaimCollateral(vault.id, unlockedCollateral.toFixed());\n                _context.next = 3;\n                return txObject;\n\n              case 3:\n                deleteNotifications([NotificationList.CLAIM_COLLATERAL]);\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function reclaimCollateral() {\n        return _ref6.apply(this, arguments);\n      };\n    }();\n\n    if (isOwner && unlockedCollateral > 0) {\n      var claimCollateralNotification = lang.formatString(lang.notifications.claim_collateral, gem, unlockedCollateral && formatter(unlockedCollateral), gem);\n      addNotification({\n        id: NotificationList.CLAIM_COLLATERAL,\n        content: claimCollateralNotification,\n        level: SAFETY_LEVELS.WARNING,\n        hasButton: isOwner,\n        buttonLabel: lang.notifications.claim,\n        onClick: function onClick() {\n          return reclaimCollateral();\n        }\n      });\n    }\n\n    if (!isOwner && account) {\n      addNotification({\n        id: NotificationList.NON_VAULT_OWNER,\n        content: lang.formatString(lang.notifications.non_vault_owner, /*#__PURE__*/React.createElement(Address, {\n          full: cdpOwner,\n          shorten: true,\n          expandable: false,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 11\n          }\n        })),\n        level: SAFETY_LEVELS.WARNING\n      });\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [isOwner, account, vault, unlockedCollateral]);\n  useEffect(function () {\n    if (isOwner && vaultUnderDustLimit) {\n      var amnt = formatter(debtFloor.minus(debtValue.toBigNumber()), {\n        rounding: BigNumber.ROUND_HALF_UP\n      });\n      addNotification({\n        id: NotificationList.VAULT_UNDER_DUST,\n        content: lang.formatString(lang.notifications.vault_under_dust_limit, amnt, amnt),\n        level: SAFETY_LEVELS.WARNING,\n        hasButton: true,\n        buttonLabel: 'Deposit & Generate',\n        onClick: function onClick() {\n          return showAction({\n            type: 'depositAndGenerate',\n            props: {\n              vault: vault\n            }\n          });\n        }\n      });\n    }\n\n    if (!vaultUnderDustLimit && notificationExists(NotificationList.VAULT_UNDER_DUST)) {\n      deleteNotifications([NotificationList.VAULT_UNDER_DUST]);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [isOwner, vaultUnderDustLimit]); // unmounting removes all notifications\n\n  useEffect(function () {\n    return function () {\n      return deleteNotifications([NotificationList.CLAIM_COLLATERAL, NotificationList.NON_VAULT_OWNER, NotificationList.VAULT_BELOW_CURRENT_PRICE, NotificationList.VAULT_BELOW_NEXT_PRICE, NotificationList.VAULT_IS_LIQUIDATED, NotificationList.VAULT_UNDER_DUST]);\n    };\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  []);\n\n  var showAction = function showAction(props) {\n    var emSize = parseInt(getComputedStyle(document.body).fontSize);\n    var pxBreakpoint = parseInt(theme.breakpoints.l) * emSize;\n    var isMobile = document.documentElement.clientWidth < pxBreakpoint;\n\n    if (isMobile) {\n      setActionShown(props);\n    } else {\n      showSidebar(props);\n    }\n  };\n\n  var disableDeposit = !account || emergencyShutdownActive || vaultUnderDustLimit;\n  var disablePayback = !account || emergencyShutdownActive;\n  var disableWithdraw = !account || !isOwner || emergencyShutdownActive || vaultUnderDustLimit;\n  var disableGenerate = !account || !isOwner || emergencyShutdownActive || totalGenerateableDai.toBigNumber().lt(debtFloor);\n  return /*#__PURE__*/React.createElement(PageContentLayout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Text, {\n    style: {\n      fontSize: '24px',\n      color: getColor('whiteText')\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 9\n    }\n  }, vaultType, \" \", lang.cdp, \" #\", vault.id)), /*#__PURE__*/React.createElement(Grid, {\n    py: \"m\",\n    gridColumnGap: \"l\",\n    gridTemplateColumns: {\n      0: '1fr',\n      1: '1fr',\n      xl: '1fr 1fr'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CdpViewCard, {\n    title: lang.cdp_page.liquidation_price,\n    style: {\n      color: getColor('whiteText'),\n      backgroundColor: getColor('cardBg')\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TextBlock, {\n    fontSize: \"l\",\n    style: {\n      color: getColor('whiteText')\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 11\n    }\n  }, lang.cdp_page.liquidation_price_info)), /*#__PURE__*/React.createElement(CdpViewCard, {\n    title: lang.cdp_page.collateralization_ratio,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Flex, {\n    alignItems: \"flex-end\",\n    mt: \"s\",\n    mb: \"xs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(AmountDisplay, {\n    amount: collateralizationRatio,\n    denomination: \"%\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(InfoContainerRow, {\n    title: lang.cdp_page.minimum_ratio,\n    value: formatter(vault.liquidationRatio, {\n      percentage: true\n    }) + '%',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 346,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(InfoContainerRow, {\n    title: lang.cdp_page.stability_fee,\n    value: formatter(vault.annualStabilityFee, {\n      percentage: true,\n      rounding: BigNumber.ROUND_HALF_UP\n    }) + '%',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(CdpViewCard, {\n    title: \"\".concat(gem, \" \").concat(lang.cdp_page.locked.toLowerCase()),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ActionContainerRow, {\n    title: \"\".concat(gem, \" \").concat(lang.cdp_page.locked.toLowerCase()),\n    conversion: \"\".concat(formatter(vault.collateralValue), \" USD\"),\n    button: /*#__PURE__*/React.createElement(ActionButton, {\n      disabled: disableDeposit,\n      onClick: function onClick() {\n        trackBtnClick('Deposit');\n        showAction({\n          type: 'deposit',\n          props: {\n            vault: vault\n          }\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 15\n      }\n    }, lang.actions.deposit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(ActionContainerRow, {\n    title: lang.cdp_page.able_withdraw,\n    conversion: \"\".concat(formatter(vault.collateralAvailableValue), \" USD\"),\n    button: /*#__PURE__*/React.createElement(ActionButton, {\n      disabled: disableWithdraw,\n      onClick: function onClick() {\n        trackBtnClick('Withdraw');\n        showAction({\n          type: 'withdraw',\n          props: {\n            vault: vault\n          }\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 15\n      }\n    }, lang.actions.withdraw),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(CdpViewCard, {\n    title: lang.cdp_page.outstanding_dai_debt,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ActionContainerRow, {\n    title: lang.cdp_page.outstanding_dai_debt,\n    value: formatter(vault.debtValue) + ' USDFL',\n    button: /*#__PURE__*/React.createElement(ActionButton, {\n      disabled: disablePayback,\n      onClick: function onClick() {\n        trackBtnClick('Payback');\n        showAction({\n          type: 'payback',\n          props: {\n            vault: vault\n          }\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 409,\n        columnNumber: 15\n      }\n    }, lang.actions.pay_back),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 405,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(ActionContainerRow, {\n    title: lang.cdp_page.available_generate,\n    value: \"\".concat(formatter(vault.daiAvailable), \" USDFL\"),\n    button: /*#__PURE__*/React.createElement(ActionButton, {\n      disabled: disableGenerate,\n      onClick: function onClick() {\n        trackBtnClick('Generate');\n        showAction({\n          type: 'generate',\n          props: {\n            vault: vault\n          }\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 427,\n        columnNumber: 15\n      }\n    }, lang.actions.generate),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 423,\n      columnNumber: 11\n    }\n  }))), FF_VAULT_HISTORY && showVaultHistory && /*#__PURE__*/React.createElement(History, {\n    title: lang.cdp_page.tx_history,\n    rows: eventHistory,\n    network: network,\n    isLoading: eventHistory === null,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 445,\n      columnNumber: 9\n    }\n  }), actionShown && /*#__PURE__*/React.createElement(FullScreenAction, Object.assign({}, actionShown, {\n    reset: function reset() {\n      return setActionShown(null);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 454,\n      columnNumber: 9\n    }\n  })));\n};\n\n__signature__(_default, \"useLanguage{{ lang }}\\nuseMaker{{ maker }}\\nuseEmergencyShutdown{{ emergencyShutdownActive }}\\nuseAnalytics{{ trackBtnClick }}\\nuseEventHistory{}\\nuseState{[actionShown, setActionShown](null)}\\nuseNotification{{\\n    addNotification,\\n    deleteNotifications,\\n    notificationExists\\n  }}\\nuseOraclePrices{{ currentPrice, nextPrice }}\\nuseEffect{}\\nuseEffect{}\\nuseEffect{}\\nuseEffect{}\\nuseEffect{}\", function () {\n  return [useLanguage, useMaker, useEmergencyShutdown, useAnalytics, useEventHistory, useNotification, useOraclePrices];\n});\n\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(log, \"log\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/src/components/CDPDisplay/Presentation.js\");\n  reactHotLoader.register(FF_VAULT_HISTORY, \"FF_VAULT_HISTORY\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/src/components/CDPDisplay/Presentation.js\");\n  reactHotLoader.register(_default, \"default\", \"/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/src/components/CDPDisplay/Presentation.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/Users/good/Documents/Good/GitHub/FL/fork/bsc-fl-cdp-portal/src/components/CDPDisplay/Presentation.js"],"names":["React","useEffect","useState","Address","useLanguage","useEventHistory","useMaker","TextBlock","PageContentLayout","Box","Grid","Flex","Text","History","ActionButton","ActionContainerRow","AmountDisplay","CdpViewCard","InfoContainerRow","theme","getColor","FullScreenAction","debug","useNotification","useAnalytics","useEmergencyShutdown","FeatureFlags","NotificationList","SAFETY_LEVELS","formatter","BigNumber","NextPriceLiquidation","useOraclePrices","log","FF_VAULT_HISTORY","vault","showSidebar","account","network","cdpOwner","showVaultHistory","lang","maker","emergencyShutdownActive","trackBtnClick","collateralAmount","collateralValue","rawCollateralizationRatio","collateralizationRatio","rawLiquidationPrice","liquidationPrice","vaultType","unlockedCollateral","liquidationRatio","minSafeCollateralAmount","debtValue","debtFloor","id","gem","symbol","percentage","eventHistory","Infinity","NaN","includes","cdp_page","not_applicable","isOwner","address","toLowerCase","actionShown","setActionShown","addNotification","deleteNotifications","notificationExists","currentPrice","nextPrice","vaultUnderDustLimit","toBigNumber","gt","lt","totalGenerateableDai","plus","daiAvailable","length","some","type","now","Date","sevenDays","cutOff","Math","floor","recentEvents","filter","timestamp","sumCollateralLiquidated","reduce","acc","amount","VAULT_IS_LIQUIDATED","content","formatString","notifications","vault_is_liquidated","level","WARNING","VAULT_BELOW_NEXT_PRICE","VAULT_BELOW_CURRENT_PRICE","toString","currentCollateralNeeded","minus","currentDebtNeeded","div","vault_below_current_price","DANGER","gte","nextCollateralNeeded","times","nextDebtNeeded","reclaimCollateral","txObject","service","toFixed","CLAIM_COLLATERAL","claimCollateralNotification","claim_collateral","hasButton","buttonLabel","claim","onClick","NON_VAULT_OWNER","non_vault_owner","amnt","rounding","ROUND_HALF_UP","VAULT_UNDER_DUST","vault_under_dust_limit","showAction","props","emSize","parseInt","getComputedStyle","document","body","fontSize","pxBreakpoint","breakpoints","l","isMobile","documentElement","clientWidth","disableDeposit","disablePayback","disableWithdraw","disableGenerate","color","cdp","xl","liquidation_price","backgroundColor","liquidation_price_info","collateralization_ratio","minimum_ratio","stability_fee","annualStabilityFee","locked","actions","deposit","able_withdraw","collateralAvailableValue","withdraw","outstanding_dai_debt","pay_back","available_generate","generate","tx_history"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Address } from '@makerdao/ui-components-core';\nimport useLanguage from 'hooks/useLanguage';\nimport useEventHistory from 'hooks/useEventHistory';\nimport useMaker from 'hooks/useMaker';\n\nimport { TextBlock } from 'components/Typography';\nimport PageContentLayout from 'layouts/PageContentLayout';\nimport { Box, Grid, Flex, Text } from '@makerdao/ui-components-core';\nimport History from './History';\nimport {\n  ActionButton,\n  ActionContainerRow,\n  AmountDisplay,\n  CdpViewCard,\n  InfoContainerRow\n} from './subcomponents';\nimport theme, { getColor } from '../../styles/theme';\nimport FullScreenAction from './FullScreenAction';\nimport debug from 'debug';\nimport useNotification from 'hooks/useNotification';\nimport useAnalytics from 'hooks/useAnalytics';\nimport useEmergencyShutdown from 'hooks/useEmergencyShutdown';\nimport { FeatureFlags } from 'utils/constants';\nimport { NotificationList, SAFETY_LEVELS } from 'utils/constants';\nimport { formatter } from 'utils/ui';\nimport BigNumber from 'bignumber.js';\nimport NextPriceLiquidation from '../NotificationContent/NextPriceLiquidatation';\nimport useOraclePrices from 'hooks/useOraclePrices';\nconst log = debug('maker:CDPDisplay/Presentation');\nconst { FF_VAULT_HISTORY } = FeatureFlags;\n\nexport default function({\n  vault,\n  showSidebar,\n  account,\n  network,\n  cdpOwner,\n  showVaultHistory = true\n}) {\n  const { lang } = useLanguage();\n  const { maker } = useMaker();\n\n  const { emergencyShutdownActive } = useEmergencyShutdown();\n  const { trackBtnClick } = useAnalytics('CollateralView');\n  let {\n    collateralAmount,\n    collateralValue,\n    collateralizationRatio: rawCollateralizationRatio,\n    liquidationPrice: rawLiquidationPrice,\n    vaultType,\n    unlockedCollateral,\n    liquidationRatio,\n    minSafeCollateralAmount,\n    debtValue,\n    debtFloor\n  } = vault;\n\n  log(`Rendering vault #${vault.id}`);\n\n  const gem = collateralAmount?.symbol;\n  let liquidationPrice = formatter(rawLiquidationPrice);\n  let collateralizationRatio = formatter(rawCollateralizationRatio, {\n    percentage: true\n  });\n  // eslint-disable-next-line react-hooks/rules-of-hooks\n  const eventHistory =\n    FF_VAULT_HISTORY && showVaultHistory ? useEventHistory(vault.id) : null;\n\n  if (['Infinity', Infinity, 'NaN', NaN].includes(liquidationPrice))\n    liquidationPrice = lang.cdp_page.not_applicable;\n  if (['Infinity', Infinity, 'NaN', NaN].includes(collateralizationRatio))\n    collateralizationRatio = lang.cdp_page.not_applicable;\n  const isOwner =\n    account && account.address.toLowerCase() === cdpOwner.toLowerCase();\n\n  const [actionShown, setActionShown] = useState(null);\n  const {\n    addNotification,\n    deleteNotifications,\n    notificationExists\n  } = useNotification();\n\n  const { currentPrice, nextPrice } = useOraclePrices({ gem });\n\n  const vaultUnderDustLimit =\n    debtValue.toBigNumber().gt(0) && debtValue.toBigNumber().lt(debtFloor);\n  const totalGenerateableDai = debtValue.plus(vault.daiAvailable);\n\n  useEffect(() => {\n    if (\n      isOwner &&\n      eventHistory?.length &&\n      eventHistory.some(({ type }) => type === 'BITE')\n    ) {\n      const now = Date.now();\n      const sevenDays = 7 * 24 * 60 * 60 * 1000;\n      const cutOff = Math.floor((now - sevenDays) / 1000);\n\n      const recentEvents = eventHistory\n        .filter(({ type }) => type === 'BITE')\n        .filter(({ timestamp }) => timestamp >= cutOff);\n\n      const sumCollateralLiquidated = recentEvents.reduce(\n        (acc, { amount }) => acc.plus(amount),\n        BigNumber(0)\n      );\n      if (recentEvents?.length) {\n        addNotification({\n          id: NotificationList.VAULT_IS_LIQUIDATED,\n          content: lang.formatString(\n            lang.notifications.vault_is_liquidated,\n            `${formatter(sumCollateralLiquidated)} ${gem}`\n          ),\n          level: SAFETY_LEVELS.WARNING\n        });\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [eventHistory?.length]);\n\n  useEffect(() => {\n    const {\n      VAULT_BELOW_NEXT_PRICE,\n      VAULT_BELOW_CURRENT_PRICE\n    } = NotificationList;\n\n    if (\n      isOwner &&\n      !['Infinity', Infinity, 'NaN', NaN].includes(\n        rawLiquidationPrice.toBigNumber().toString()\n      ) &&\n      currentPrice &&\n      nextPrice\n    ) {\n      if (\n        currentPrice.lt(rawLiquidationPrice.toBigNumber()) &&\n        !notificationExists(VAULT_BELOW_CURRENT_PRICE)\n      ) {\n        const currentCollateralNeeded = minSafeCollateralAmount\n          .toBigNumber()\n          .minus(collateralAmount.toBigNumber());\n\n        const currentDebtNeeded = debtValue\n          .toBigNumber()\n          .minus(\n            collateralValue.toBigNumber().div(liquidationRatio.toBigNumber())\n          );\n\n        if (notificationExists(VAULT_BELOW_NEXT_PRICE)) {\n          deleteNotifications([VAULT_BELOW_NEXT_PRICE]);\n        }\n        addNotification({\n          id: NotificationList.VAULT_BELOW_CURRENT_PRICE,\n          content: lang.formatString(\n            lang.notifications.vault_below_current_price,\n            vaultType,\n            `${formatter(currentCollateralNeeded)} ${gem}`,\n            `${formatter(currentDebtNeeded)} USDFL`\n          ),\n          level: SAFETY_LEVELS.DANGER\n        });\n      } else if (\n        currentPrice.gte(rawLiquidationPrice.toBigNumber()) &&\n        nextPrice.lt(rawLiquidationPrice.toBigNumber()) &&\n        !notificationExists(NotificationList.VAULT_BELOW_NEXT_PRICE)\n      ) {\n        const nextCollateralNeeded = debtValue\n          .times(liquidationRatio)\n          .div(nextPrice)\n          .toBigNumber()\n          .minus(collateralAmount.toBigNumber());\n\n        const nextDebtNeeded = debtValue.toBigNumber().minus(\n          collateralAmount\n            .times(nextPrice)\n            .toBigNumber()\n            .div(liquidationRatio.toBigNumber())\n        );\n\n        if (notificationExists(VAULT_BELOW_CURRENT_PRICE)) {\n          deleteNotifications([VAULT_BELOW_CURRENT_PRICE]);\n        }\n        addNotification({\n          id: NotificationList.VAULT_BELOW_NEXT_PRICE,\n          content: (\n            <NextPriceLiquidation\n              vaultType={vaultType}\n              collateral={formatter(nextCollateralNeeded)}\n              debt={formatter(nextDebtNeeded)}\n            />\n          ),\n          level: SAFETY_LEVELS.WARNING\n        });\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [\n    currentPrice,\n    nextPrice,\n    rawLiquidationPrice,\n    debtValue,\n    collateralAmount,\n    collateralValue,\n    liquidationRatio,\n    minSafeCollateralAmount\n  ]);\n\n  useEffect(() => {\n    const reclaimCollateral = async () => {\n      const txObject = maker\n        .service('mcd:cdpManager')\n        .reclaimCollateral(vault.id, unlockedCollateral.toFixed());\n      await txObject;\n      deleteNotifications([NotificationList.CLAIM_COLLATERAL]);\n    };\n\n    if (isOwner && unlockedCollateral > 0) {\n      const claimCollateralNotification = lang.formatString(\n        lang.notifications.claim_collateral,\n        gem,\n        unlockedCollateral && formatter(unlockedCollateral),\n        gem\n      );\n\n      addNotification({\n        id: NotificationList.CLAIM_COLLATERAL,\n        content: claimCollateralNotification,\n        level: SAFETY_LEVELS.WARNING,\n        hasButton: isOwner,\n        buttonLabel: lang.notifications.claim,\n        onClick: () => reclaimCollateral()\n      });\n    }\n\n    if (!isOwner && account) {\n      addNotification({\n        id: NotificationList.NON_VAULT_OWNER,\n        content: lang.formatString(\n          lang.notifications.non_vault_owner,\n          <Address full={cdpOwner} shorten={true} expandable={false} />\n        ),\n        level: SAFETY_LEVELS.WARNING\n      });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOwner, account, vault, unlockedCollateral]);\n\n  useEffect(() => {\n    if (isOwner && vaultUnderDustLimit) {\n      const amnt = formatter(debtFloor.minus(debtValue.toBigNumber()), {\n        rounding: BigNumber.ROUND_HALF_UP\n      });\n      addNotification({\n        id: NotificationList.VAULT_UNDER_DUST,\n        content: lang.formatString(\n          lang.notifications.vault_under_dust_limit,\n          amnt,\n          amnt\n        ),\n        level: SAFETY_LEVELS.WARNING,\n        hasButton: true,\n        buttonLabel: 'Deposit & Generate',\n        onClick: () =>\n          showAction({ type: 'depositAndGenerate', props: { vault } })\n      });\n    }\n    if (\n      !vaultUnderDustLimit &&\n      notificationExists(NotificationList.VAULT_UNDER_DUST)\n    ) {\n      deleteNotifications([NotificationList.VAULT_UNDER_DUST]);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOwner, vaultUnderDustLimit]);\n\n  // unmounting removes all notifications\n  useEffect(\n    () => () =>\n      deleteNotifications([\n        NotificationList.CLAIM_COLLATERAL,\n        NotificationList.NON_VAULT_OWNER,\n        NotificationList.VAULT_BELOW_CURRENT_PRICE,\n        NotificationList.VAULT_BELOW_NEXT_PRICE,\n        NotificationList.VAULT_IS_LIQUIDATED,\n        NotificationList.VAULT_UNDER_DUST\n      ]),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []\n  );\n\n  const showAction = props => {\n    const emSize = parseInt(getComputedStyle(document.body).fontSize);\n    const pxBreakpoint = parseInt(theme.breakpoints.l) * emSize;\n    const isMobile = document.documentElement.clientWidth < pxBreakpoint;\n    if (isMobile) {\n      setActionShown(props);\n    } else {\n      showSidebar(props);\n    }\n  };\n\n  const disableDeposit =\n    !account || emergencyShutdownActive || vaultUnderDustLimit;\n  const disablePayback = !account || emergencyShutdownActive;\n  const disableWithdraw =\n    !account || !isOwner || emergencyShutdownActive || vaultUnderDustLimit;\n  const disableGenerate =\n    !account ||\n    !isOwner ||\n    emergencyShutdownActive ||\n    totalGenerateableDai.toBigNumber().lt(debtFloor);\n\n  return (\n    <PageContentLayout>\n      <Box>\n        <Text style={{ fontSize: '24px', color: getColor('whiteText') }}>\n          {vaultType} {lang.cdp} #{vault.id}\n        </Text>\n      </Box>\n      <Grid\n        py=\"m\"\n        gridColumnGap=\"l\"\n        gridTemplateColumns={{\n          0: '1fr',\n          1: '1fr',\n          xl: '1fr 1fr'\n        }}\n      >\n        <CdpViewCard\n          title={lang.cdp_page.liquidation_price}\n          style={{\n            color: getColor('whiteText'),\n            backgroundColor: getColor('cardBg')\n          }}\n        >\n          <TextBlock fontSize=\"l\" style={{ color: getColor('whiteText') }}>\n            {lang.cdp_page.liquidation_price_info}\n          </TextBlock>\n        </CdpViewCard>\n\n        <CdpViewCard title={lang.cdp_page.collateralization_ratio}>\n          <Flex alignItems=\"flex-end\" mt=\"s\" mb=\"xs\">\n            <AmountDisplay amount={collateralizationRatio} denomination=\"%\" />\n          </Flex>\n          <InfoContainerRow\n            title={lang.cdp_page.minimum_ratio}\n            value={\n              formatter(vault.liquidationRatio, {\n                percentage: true\n              }) + '%'\n            }\n          />\n          <InfoContainerRow\n            title={lang.cdp_page.stability_fee}\n            value={\n              formatter(vault.annualStabilityFee, {\n                percentage: true,\n                rounding: BigNumber.ROUND_HALF_UP\n              }) + '%'\n            }\n          />\n        </CdpViewCard>\n\n        <CdpViewCard title={`${gem} ${lang.cdp_page.locked.toLowerCase()}`}>\n          <ActionContainerRow\n            title={`${gem} ${lang.cdp_page.locked.toLowerCase()}`}\n            conversion={`${formatter(vault.collateralValue)} USD`}\n            button={\n              <ActionButton\n                disabled={disableDeposit}\n                onClick={() => {\n                  trackBtnClick('Deposit');\n                  showAction({\n                    type: 'deposit',\n                    props: { vault }\n                  });\n                }}\n              >\n                {lang.actions.deposit}\n              </ActionButton>\n            }\n          />\n          <ActionContainerRow\n            title={lang.cdp_page.able_withdraw}\n            conversion={`${formatter(vault.collateralAvailableValue)} USD`}\n            button={\n              <ActionButton\n                disabled={disableWithdraw}\n                onClick={() => {\n                  trackBtnClick('Withdraw');\n                  showAction({\n                    type: 'withdraw',\n                    props: { vault }\n                  });\n                }}\n              >\n                {lang.actions.withdraw}\n              </ActionButton>\n            }\n          />\n        </CdpViewCard>\n\n        <CdpViewCard title={lang.cdp_page.outstanding_dai_debt}>\n          <ActionContainerRow\n            title={lang.cdp_page.outstanding_dai_debt}\n            value={formatter(vault.debtValue) + ' USDFL'}\n            button={\n              <ActionButton\n                disabled={disablePayback}\n                onClick={() => {\n                  trackBtnClick('Payback');\n                  showAction({\n                    type: 'payback',\n                    props: { vault }\n                  });\n                }}\n              >\n                {lang.actions.pay_back}\n              </ActionButton>\n            }\n          />\n          <ActionContainerRow\n            title={lang.cdp_page.available_generate}\n            value={`${formatter(vault.daiAvailable)} USDFL`}\n            button={\n              <ActionButton\n                disabled={disableGenerate}\n                onClick={() => {\n                  trackBtnClick('Generate');\n                  showAction({\n                    type: 'generate',\n                    props: { vault }\n                  });\n                }}\n              >\n                {lang.actions.generate}\n              </ActionButton>\n            }\n          />\n        </CdpViewCard>\n      </Grid>\n\n      {FF_VAULT_HISTORY && showVaultHistory && (\n        <History\n          title={lang.cdp_page.tx_history}\n          rows={eventHistory}\n          network={network}\n          isLoading={eventHistory === null}\n        />\n      )}\n\n      {actionShown && (\n        <FullScreenAction {...actionShown} reset={() => setActionShown(null)} />\n      )}\n    </PageContentLayout>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}